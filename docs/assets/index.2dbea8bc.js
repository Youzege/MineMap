import{C as S,r as L,a as x,u as F,l as w,M as b,o as B,b as A,c as G,B as z,f as V,t as P,_ as $,d as H,e as k,g as j}from"./ZeView.8890a979.js";import{x as C,y,g as K,z as X,A as Y,o as T,a as I,B as D,C as J,c as U,w as m,b as N,t as W,l as Z,m as q,d as f}from"./vendor.c825c0be.js";import{_ as M}from"./index.83bc55db.js";var l={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},Q=globalThis&&globalThis.__extends||function(){var s=function(n,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},s(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),a={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},ee=function(s){Q(n,s);function n(e){var t=s.call(this)||this;t.on,t.once,t.un,t.options=e,t.id=e.id,t.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,t.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,t.element=document.createElement("div"),t.element.className=e.className!==void 0?e.className:"ol-overlay-container "+S,t.element.style.position="absolute",t.element.style.pointerEvents="auto";var i=e.autoPan;return i&&typeof i!="object"&&(i={animation:e.autoPanAnimation,margin:e.autoPanMargin}),t.autoPan=i||!1,t.rendered={transform_:"",visible:!0},t.mapPostrenderListenerKey=null,t.addChangeListener(a.ELEMENT,t.handleElementChanged),t.addChangeListener(a.MAP,t.handleMapChanged),t.addChangeListener(a.OFFSET,t.handleOffsetChanged),t.addChangeListener(a.POSITION,t.handlePositionChanged),t.addChangeListener(a.POSITIONING,t.handlePositioningChanged),e.element!==void 0&&t.setElement(e.element),t.setOffset(e.offset!==void 0?e.offset:[0,0]),t.setPositioning(e.positioning!==void 0?e.positioning:l.TOP_LEFT),e.position!==void 0&&t.setPosition(e.position),t}return n.prototype.getElement=function(){return this.get(a.ELEMENT)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(a.MAP)},n.prototype.getOffset=function(){return this.get(a.OFFSET)},n.prototype.getPosition=function(){return this.get(a.POSITION)},n.prototype.getPositioning=function(){return this.get(a.POSITIONING)},n.prototype.handleElementChanged=function(){L(this.element);var e=this.getElement();e&&this.element.appendChild(e)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(x(this.element),F(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=w(e,b.POSTRENDER,this.render,this),this.updatePixelPosition();var t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(e){this.set(a.ELEMENT,e)},n.prototype.setMap=function(e){this.set(a.MAP,e)},n.prototype.setOffset=function(e){this.set(a.OFFSET,e)},n.prototype.setPosition=function(e){this.set(a.POSITION,e)},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},n.prototype.panIntoView=function(e){var t=this.getMap();if(!(!t||!t.getTargetElement()||!this.get(a.POSITION))){var i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),o=this.getRect(r,[B(r),A(r)]),_=e||{},h=_.margin===void 0?20:_.margin;if(!G(i,o)){var d=o[0]-i[0],u=i[2]-o[2],p=o[1]-i[1],v=i[3]-o[3],c=[0,0];if(d<0?c[0]=d-h:u<0&&(c[0]=Math.abs(u)+h),p<0?c[1]=p-h:v<0&&(c[1]=Math.abs(v)+h),c[0]!==0||c[1]!==0){var g=t.getView().getCenterInternal(),E=t.getPixelFromCoordinateInternal(g);if(!E)return;var R=[E[0]+c[0],E[1]+c[1]],O=_.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(R),duration:O.duration,easing:O.easing})}}}},n.prototype.getRect=function(e,t){var i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+t[0],o+t[1]]},n.prototype.setPositioning=function(e){this.set(a.POSITIONING,e)},n.prototype.setVisible=function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)},n.prototype.updatePixelPosition=function(){var e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}var i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)},n.prototype.updateRenderedPosition=function(e,t){var i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var _=Math.round(e[0]+r[0])+"px",h=Math.round(e[1]+r[1])+"px",d="0%",u="0%";o==l.BOTTOM_RIGHT||o==l.CENTER_RIGHT||o==l.TOP_RIGHT?d="-100%":(o==l.BOTTOM_CENTER||o==l.CENTER_CENTER||o==l.TOP_CENTER)&&(d="-50%"),o==l.BOTTOM_LEFT||o==l.BOTTOM_CENTER||o==l.BOTTOM_RIGHT?u="-100%":(o==l.CENTER_LEFT||o==l.CENTER_CENTER||o==l.CENTER_RIGHT)&&(u="-50%");var p="translate("+d+", "+u+") translate("+_+", "+h+")";this.rendered.transform_!=p&&(this.rendered.transform_=p,i.transform=p,i.msTransform=p)},n.prototype.getOptions=function(){return this.options},n}(z),te=ee;const ne={props:{position:{type:Array}},setup(s){const n=s,e=()=>{let o=JSON.parse(JSON.stringify(n));return o.position=V(o.position),o},t=C(null),i=y("map"),r=K(()=>new te(e()));return X(()=>{i.addOverlay(r.value),r.value.setElement(t.value)}),Y("overlay",r.value),(o,_)=>(T(),I("div",{ref_key:"htmlContent",ref:t},[D(o.$slots,"default",{position:s.position})],512))}};const oe=s=>(Z("data-v-2fee6d93"),s=s(),q(),s),ie=oe(()=>N("h4",null,"\u5F53\u524D\u5750\u6807",-1)),re={class:"item"},ae={setup(s){const n=y("overlay"),e=y("map"),t=C("");return e.on("singleclick",function(i){const r=i.coordinate;n.setPosition(r),t.value=`lon: ${P(r)[0].toFixed(3)} --- lat ${P(r)[1].toFixed(3)}`}),(i,r)=>{const o=J;return T(),U(o,null,{default:m(()=>[ie,N("div",re,W(t.value),1)]),_:1})}}};var se=M(ae,[["__scopeId","data-v-2fee6d93"]]);const le={class:"map-container"},pe={setup(s){const n=[113.27,23.1],e="http://t{0-7}.tianditu.gov.cn/vec_w/wmts?tk=40e50cca6823476482e8721bb2eee900",t="http://t{0-7}.tianditu.gov.cn/cva_w/wmts?tk=40e50cca6823476482e8721bb2eee900",i="vec",r="cva",o="\u5929\u5730\u56FEXYZ";return(_,h)=>{const d=H,u=k,p=j,v=se,c=ne,g=$;return T(),I("div",le,[f(g,null,{default:m(()=>[f(d,{center:n,zoom:12}),f(p,null,{default:m(()=>[f(u,{url:e,attributions:o,layer:i})]),_:1}),f(p,null,{default:m(()=>[f(u,{url:t,attributions:o,layer:r})]),_:1}),f(c,{position:[0,0]},{default:m(()=>[f(v)]),_:1})]),_:1})])}}};var fe=M(pe,[["__scopeId","data-v-11e8dc2e"]]);export{fe as default};
