import{u as ai,l as si,E as qt,B as an,d as gt,e as sn,g as pt,h as fr,i as on,m as ln,j as hn,k as un,G as Je,n as Ht,o as fn,p as O,q as cn,r as dn,S as pn,s as Z,v as Pi,w as _n,x as It,I as V,y as cr,z as ht,A as Ft,C as Kt,D as Zt,F as Qt,H as vn,L as gn,J as yn,K as mn,R as xn,M as ki,N as Ni,P as Sn,Q as Ce,T as te,U as ee,V as Fe,W as En,X as ci,Y as In,Z as tt,$ as St,a0 as ie,a1 as Te,a2 as dr,a3 as Cn,a4 as X,a5 as Tn,a6 as we,a7 as wn,a8 as Rn,a9 as On,aa as Re,ab as Lt,ac as oi,ad as Ln,ae as Jt,af as Dn,ag as bi,ah as Oe,ai as Fn,aj as li,ak as Le,al as An,am as Mn,an as Pn,ao as kn,ap as Bi,aq as Gi,ar as pe,as as _e,at as Nn,au as bn,av as Bn,aw as Gn,ax as Vt,ay as Yn,az as Wn,aA as Xn,aB as Un,aC as $n,aD as pr,aE as _r,aF as Hn,aG as Vn,aH as jn,aI as zn,aJ as Yi,aK as Jn,aL as qn,aM as Kn,aN as vr,f as At,aO as Zn,O as Qn,_ as ta,a as ea,b as ia,c as ra}from"./el-card.d1aed46f.js";import{_ as na}from"./index.7e03f4a1.js";import{G as aa,x as xt,H as sa,I as oa,J as la,C as ha,o as di,c as gr,w as J,d as U,K as Ct,t as mt,l as ua,m as fa,b as Wi,y as ca,z as da,a as pa,j as _a}from"./vendor.c1c86553.js";var Xt={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},va=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ga=function(n){va(e,n);function e(t){var i=n.call(this)||this;if(i.on,i.once,i.un,i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addChangeListener(i.geometryName_,i.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var r=t;i.setGeometry(r)}else{var a=t;i.setProperties(a)}return i}return e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(ai(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=si(t,qt.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?ya(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(an);function ya(n){if(typeof n=="function")return n;var e;if(Array.isArray(n))e=n;else{gt(typeof n.getZIndex=="function",41);var t=n;e=[t]}return function(){return e}}var Ae=ga;function ma(n,e,t,i,r,a,s){var o,l,h=(t-e)/i;if(h===1)o=e;else if(h===2)o=e,l=r;else if(h!==0){for(var u=n[e],f=n[e+1],c=0,d=[0],p=e+i;p<t;p+=i){var _=n[p],v=n[p+1];c+=Math.sqrt((_-u)*(_-u)+(v-f)*(v-f)),d.push(c),u=_,f=v}var y=r*c,g=sn(d,y);g<0?(l=(y-d[-g-2])/(d[-g-1]-d[-g-2]),o=e+(-g-2)*i):o=e+g*i}for(var x=s>1?s:2,S=a||new Array(x),p=0;p<x;++p)S[p]=o===void 0?NaN:l===void 0?n[o+p]:pt(n[o+p],n[o+i+p],l);return S}function xa(n,e,t,i,r,a){if(t==e)return null;var s;if(r<n[e+i-1])return a?(s=n.slice(e,e+i),s[i-1]=r,s):null;if(n[t-1]<r)return a?(s=n.slice(t-i,t),s[i-1]=r,s):null;if(r==n[e+i-1])return n.slice(e,e+i);for(var o=e/i,l=t/i;o<l;){var h=o+l>>1;r<n[(h+1)*i-1]?l=h:o=h+1}var u=n[o*i-1];if(r==u)return n.slice((o-1)*i,(o-1)*i+i);var f=n[(o+1)*i-1],c=(r-u)/(f-u);s=[];for(var d=0;d<i-1;++d)s.push(pt(n[(o-1)*i+d],n[o*i+d],c));return s.push(r),s}function yr(n,e,t,i){for(var r=n[e],a=n[e+1],s=0,o=e+i;o<t;o+=i){var l=n[o],h=n[o+1];s+=Math.sqrt((l-r)*(l-r)+(h-a)*(h-a)),r=l,a=h}return s}var Sa=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ea=function(n){Sa(e,n);function e(t,i){var r=n.call(this)||this;return r.flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?r.setFlatCoordinates(i,t):r.setCoordinates(t,i),r}return e.prototype.appendCoordinate=function(t){this.flatCoordinates?fr(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){return a<on(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ln(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),hn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,r,a))},e.prototype.forEachSegment=function(t){return un(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,i){if(this.layout!=Je.XYM&&this.layout!=Je.XYZM)return null;var r=i!==void 0?i:!1;return xa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return Ht(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,i){return ma(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)},e.prototype.getLength=function(){return yr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,Je.XY)},e.prototype.getType=function(){return O.LINE_STRING},e.prototype.intersectsExtent=function(t){return cn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=dn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(pn),Ia=Ea;function Ca(n,e,t,i,r){mr(n,e,t||0,i||n.length-1,r||Ta)}function mr(n,e,t,i,r){for(;i>t;){if(i-t>600){var a=i-t+1,s=e-t+1,o=Math.log(a),l=.5*Math.exp(2*o/3),h=.5*Math.sqrt(o*l*(a-l)/a)*(s-a/2<0?-1:1),u=Math.max(t,Math.floor(e-s*l/a+h)),f=Math.min(i,Math.floor(e+(a-s)*l/a+h));mr(n,e,u,f,r)}var c=n[e],d=t,p=i;for(Ut(n,t,e),r(n[i],c)>0&&Ut(n,t,i);d<p;){for(Ut(n,d,p),d++,p--;r(n[d],c)<0;)d++;for(;r(n[p],c)>0;)p--}r(n[t],c)===0?Ut(n,t,p):(p++,Ut(n,p,i)),p<=e&&(t=p+1),e<=p&&(i=p-1)}}function Ut(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function Ta(n,e){return n<e?-1:n>e?1:0}class xr{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!ge(e,t))return i;const r=this.toBBox,a=[];for(;t;){for(let s=0;s<t.children.length;s++){const o=t.children[s],l=t.leaf?r(o):o;ge(e,l)&&(t.leaf?i.push(o):Ke(e,l)?this._all(o,i):a.push(o))}t=a.pop()}return i}collides(e){let t=this.data;if(!ge(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const a=t.children[r],s=t.leaf?this.toBBox(a):a;if(ge(e,s)){if(t.leaf||Ke(e,s))return!0;i.push(a)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Dt([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),a=[],s=[];let o,l,h;for(;i||a.length;){if(i||(i=a.pop(),l=a[a.length-1],o=s.pop(),h=!0),i.leaf){const u=wa(e,i.children,t);if(u!==-1)return i.children.splice(u,1),a.push(i),this._condense(a),this}!h&&!i.leaf&&Ke(i,r)?(a.push(i),s.push(o),o=0,l=i,i=i.children[0]):l?(o++,i=l.children[o],h=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const a=i-t+1;let s=this._maxEntries,o;if(a<=s)return o=Dt(e.slice(t,i+1)),Tt(o,this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),o=Dt([]),o.leaf=!1,o.height=r;const l=Math.ceil(a/s),h=l*Math.ceil(Math.sqrt(s));Xi(e,t,i,h,this.compareMinX);for(let u=t;u<=i;u+=h){const f=Math.min(u+h-1,i);Xi(e,u,f,l,this.compareMinY);for(let c=u;c<=f;c+=l){const d=Math.min(c+l-1,f);o.children.push(this._build(e,c,d,r-1))}}return Tt(o,this.toBBox),o}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let a=1/0,s=1/0,o;for(let l=0;l<t.children.length;l++){const h=t.children[l],u=qe(h),f=La(e,h)-u;f<s?(s=f,a=u<a?u:a,o=h):f===s&&u<a&&(a=u,o=h)}t=o||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),a=[],s=this._chooseSubtree(r,this.data,t,a);for(s.children.push(e),zt(s,r);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(r,a,t)}_split(e,t){const i=e[t],r=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,r);const s=this._chooseSplitIndex(i,a,r),o=Dt(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,Tt(i,this.toBBox),Tt(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)}_splitRoot(e,t){this.data=Dt([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Tt(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,a=1/0,s=1/0;for(let o=t;o<=i-t;o++){const l=jt(e,0,o,this.toBBox),h=jt(e,o,i,this.toBBox),u=Da(l,h),f=qe(l)+qe(h);u<a?(a=u,r=o,s=f<s?f:s):u===a&&f<s&&(s=f,r=o)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:Ra,a=e.leaf?this.compareMinY:Oa,s=this._allDistMargin(e,t,i,r),o=this._allDistMargin(e,t,i,a);s<o&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const a=this.toBBox,s=jt(e,0,t,a),o=jt(e,i-t,i,a);let l=ve(s)+ve(o);for(let h=t;h<i-t;h++){const u=e.children[h];zt(s,e.leaf?a(u):u),l+=ve(s)}for(let h=i-t-1;h>=t;h--){const u=e.children[h];zt(o,e.leaf?a(u):u),l+=ve(o)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)zt(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Tt(e[t],this.toBBox)}}function wa(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Tt(n,e){jt(n,0,n.children.length,e,n)}function jt(n,e,t,i,r){r||(r=Dt(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let a=e;a<t;a++){const s=n.children[a];zt(r,n.leaf?i(s):s)}return r}function zt(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Ra(n,e){return n.minX-e.minX}function Oa(n,e){return n.minY-e.minY}function qe(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function ve(n){return n.maxX-n.minX+(n.maxY-n.minY)}function La(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Da(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),a=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,a-i)}function Ke(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function ge(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function Dt(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Xi(n,e,t,i,r){const a=[e,t];for(;a.length;){if(t=a.pop(),e=a.pop(),t-e<=i)continue;const s=e+Math.ceil((t-e)/i/2)*i;Ca(n,s,e,t,r),a.push(e,s,s,t)}}var Fa=function(){function n(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Pi(e.scale),this.displacement_=e.displacement}return n.prototype.clone=function(){var e=this.getScale();return new n({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},n.prototype.getOpacity=function(){return this.opacity_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getScaleArray=function(){return this.scaleArray_},n.prototype.getDisplacement=function(){return this.displacement_},n.prototype.getAnchor=function(){return Z()},n.prototype.getImage=function(e){return Z()},n.prototype.getHitDetectionImage=function(){return Z()},n.prototype.getPixelRatio=function(e){return 1},n.prototype.getImageState=function(){return Z()},n.prototype.getImageSize=function(){return Z()},n.prototype.getOrigin=function(){return Z()},n.prototype.getSize=function(){return Z()},n.prototype.setDisplacement=function(e){this.displacement_=e},n.prototype.setOpacity=function(e){this.opacity_=e},n.prototype.setRotateWithView=function(e){this.rotateWithView_=e},n.prototype.setRotation=function(e){this.rotation_=e},n.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Pi(e)},n.prototype.listenImageChange=function(e){Z()},n.prototype.load=function(){Z()},n.prototype.unlistenImageChange=function(e){Z()},n}(),Sr=Fa;function it(n){return Array.isArray(n)?_n(n):n}var Aa=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ma=function(n){Aa(e,n);function e(t){var i=this,r=t.rotateWithView!==void 0?t.rotateWithView:!1;return i=n.call(this,{opacity:1,rotateWithView:r,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0]})||this,i.canvas_=void 0,i.hitDetectionCanvas_=null,i.fill_=t.fill!==void 0?t.fill:null,i.origin_=[0,0],i.points_=t.points,i.radius_=t.radius!==void 0?t.radius:t.radius1,i.radius2_=t.radius2,i.angle_=t.angle!==void 0?t.angle:0,i.stroke_=t.stroke!==void 0?t.stroke:null,i.size_=null,i.renderOptions_=null,i.render(),i}return e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var i=this.getDisplacement();return[t[0]/2-i[0],t[1]/2+i[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var i=this.canvas_[t];if(!i){var r=this.renderOptions_,a=It(r.size*t,r.size*t);this.draw_(r,a,t),i=a.canvas,this.canvas_[t]=i}return i},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return V.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,i,r){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;var a=this.radius_,s=this.radius2_===void 0?a:this.radius2_;if(a<s){var o=a;a=s,s=o}var l=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/l,u=s*Math.sin(h),f=Math.sqrt(s*s-u*u),c=a-f,d=Math.sqrt(u*u+c*c),p=d/u;if(t==="miter"&&p<=r)return p*i;var _=i/2/p,v=i/2*(c/d),y=Math.sqrt((a+_)*(a+_)+v*v),g=y-a;if(this.radius2_===void 0||t==="bevel")return g*2;var x=a*Math.sin(h),S=Math.sqrt(a*a-x*x),E=s-S,T=Math.sqrt(x*x+E*E),R=T/x;if(R<=r){var C=R*i/2-s-a;return 2*Math.max(g,C)}return g*2},e.prototype.createRenderOptions=function(){var t=Ft,i=0,r=null,a=0,s,o=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=Kt),s=it(s),o=this.stroke_.getWidth(),o===void 0&&(o=Zt),r=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Ft),i=this.stroke_.getMiterLimit(),i===void 0&&(i=Qt));var l=this.calculateLineJoinSize_(t,o,i),h=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*h+l);return{strokeStyle:s,strokeWidth:o,size:u,lineDash:r,lineDashOffset:a,lineJoin:t,miterLimit:i}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,i,r){if(i.scale(r,r),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){var a=this.fill_.getColor();a===null&&(a=ht),i.fillStyle=it(a),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var i=this.fill_.getColor(),r=0;if(typeof i=="string"&&(i=cr(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0){var a=It(t.size,t.size);this.hitDetectionCanvas_=a.canvas,this.drawHitDetectionCanvas_(t,a)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var i=this.points_,r=this.radius_;if(i===1/0)t.arc(0,0,r,0,2*Math.PI);else{var a=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(i*=2);for(var s=this.angle_-Math.PI/2,o=2*Math.PI/i,l=0;l<i;l++){var h=s+l*o,u=l%2===0?r:a;t.lineTo(u*Math.cos(h),u*Math.sin(h))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=ht,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},e}(Sr),Pa=Ma,ka=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Na=function(n){ka(e,n);function e(t){var i=this,r=t||{};return i=n.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,scale:r.scale!==void 0?r.scale:1,rotation:r.rotation!==void 0?r.rotation:0,rotateWithView:r.rotateWithView!==void 0?r.rotateWithView:!1,displacement:r.displacement!==void 0?r.displacement:[0,0]})||this,i}return e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(Pa),Er=Na,ba=function(){function n(e){var t=e||{};this.color_=t.color!==void 0?t.color:null}return n.prototype.clone=function(){var e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0})},n.prototype.getColor=function(){return this.color_},n.prototype.setColor=function(e){this.color_=e},n}(),Ir=ba,Ba=function(){function n(e){var t=e||{};this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return n.prototype.clone=function(){var e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},n.prototype.getColor=function(){return this.color_},n.prototype.getLineCap=function(){return this.lineCap_},n.prototype.getLineDash=function(){return this.lineDash_},n.prototype.getLineDashOffset=function(){return this.lineDashOffset_},n.prototype.getLineJoin=function(){return this.lineJoin_},n.prototype.getMiterLimit=function(){return this.miterLimit_},n.prototype.getWidth=function(){return this.width_},n.prototype.setColor=function(e){this.color_=e},n.prototype.setLineCap=function(e){this.lineCap_=e},n.prototype.setLineDash=function(e){this.lineDash_=e},n.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e},n.prototype.setLineJoin=function(e){this.lineJoin_=e},n.prototype.setMiterLimit=function(e){this.miterLimit_=e},n.prototype.setWidth=function(e){this.width_=e},n}(),Ga=Ba,Cr=function(){function n(e){var t=e||{};this.geometry_=null,this.geometryFunction_=Ui,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}return n.prototype.clone=function(){var e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new n({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},n.prototype.getRenderer=function(){return this.renderer_},n.prototype.setRenderer=function(e){this.renderer_=e},n.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},n.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},n.prototype.getGeometry=function(){return this.geometry_},n.prototype.getGeometryFunction=function(){return this.geometryFunction_},n.prototype.getFill=function(){return this.fill_},n.prototype.setFill=function(e){this.fill_=e},n.prototype.getImage=function(){return this.image_},n.prototype.setImage=function(e){this.image_=e},n.prototype.getStroke=function(){return this.stroke_},n.prototype.setStroke=function(e){this.stroke_=e},n.prototype.getText=function(){return this.text_},n.prototype.setText=function(e){this.text_=e},n.prototype.getZIndex=function(){return this.zIndex_},n.prototype.setGeometry=function(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Ui,this.geometry_=e},n.prototype.setZIndex=function(e){this.zIndex_=e},n}();function Ya(n){var e;if(typeof n=="function")e=n;else{var t;if(Array.isArray(n))t=n;else{gt(typeof n.getZIndex=="function",41);var i=n;t=[i]}e=function(){return t}}return e}var Ze=null;function Wa(n,e){if(!Ze){var t=new Ir({color:"rgba(255,255,255,0.4)"}),i=new Ga({color:"#3399CC",width:1.25});Ze=[new Cr({image:new Er({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Ze}function Ui(n){return n.getGeometry()}var Tr=Cr,Xa=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$i={RENDER_ORDER:"renderOrder"},Ua=function(n){Xa(e,n);function e(t){var i=this,r=t||{},a=vn({},r);return delete a.style,delete a.renderBuffer,delete a.updateWhileAnimating,delete a.updateWhileInteracting,i=n.call(this,a)||this,i.declutter_=r.declutter!==void 0?r.declutter:!1,i.renderBuffer_=r.renderBuffer!==void 0?r.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(r.style),i.updateWhileAnimating_=r.updateWhileAnimating!==void 0?r.updateWhileAnimating:!1,i.updateWhileInteracting_=r.updateWhileInteracting!==void 0?r.updateWhileInteracting:!1,i}return e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(t){return n.prototype.getFeatures.call(this,t)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get($i.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new xr(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set($i.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=t!==void 0?t:Wa,this.styleFunction_=t===null?void 0:Ya(this.style_),this.changed()},e}(gn),$a=Ua,re={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ye=[re.FILL],vt=[re.STROKE],Et=[re.BEGIN_PATH],Hi=[re.CLOSE_PATH],I=re,Ha=function(){function n(){}return n.prototype.drawCustom=function(e,t,i,r){},n.prototype.drawGeometry=function(e){},n.prototype.setStyle=function(e){},n.prototype.drawCircle=function(e,t){},n.prototype.drawFeature=function(e,t){},n.prototype.drawGeometryCollection=function(e,t){},n.prototype.drawLineString=function(e,t){},n.prototype.drawMultiLineString=function(e,t){},n.prototype.drawMultiPoint=function(e,t){},n.prototype.drawMultiPolygon=function(e,t){},n.prototype.drawPoint=function(e,t){},n.prototype.drawPolygon=function(e,t){},n.prototype.drawText=function(e,t){},n.prototype.setFillStrokeStyle=function(e,t){},n.prototype.setImageStyle=function(e,t){},n.prototype.setTextStyle=function(e,t){},n}(),wr=Ha,Va=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ja=function(n){Va(e,n);function e(t,i,r,a){var s=n.call(this)||this;return s.tolerance=t,s.maxExtent=i,s.pixelRatio=a,s.maxLineWidth=0,s.resolution=r,s.beginGeometryInstruction1_=null,s.beginGeometryInstruction2_=null,s.bufferedMaxExtent_=null,s.instructions=[],s.coordinates=[],s.tmpCoordinate_=[],s.hitDetectionInstructions=[],s.state={},s}return e.prototype.applyPixelRatio=function(t){var i=this.pixelRatio;return i==1?t:t.map(function(r){return r*i})},e.prototype.appendFlatPointCoordinates=function(t,i){for(var r=this.getBufferedMaxExtent(),a=this.tmpCoordinate_,s=this.coordinates,o=s.length,l=0,h=t.length;l<h;l+=i)a[0]=t[l],a[1]=t[l+1],yn(r,a)&&(s[o++]=a[0],s[o++]=a[1]);return o},e.prototype.appendFlatLineCoordinates=function(t,i,r,a,s,o){var l=this.coordinates,h=l.length,u=this.getBufferedMaxExtent();o&&(i+=a);var f=t[i],c=t[i+1],d=this.tmpCoordinate_,p=!0,_,v,y;for(_=i+a;_<r;_+=a)d[0]=t[_],d[1]=t[_+1],y=mn(u,d),y!==v?(p&&(l[h++]=f,l[h++]=c,p=!1),l[h++]=d[0],l[h++]=d[1]):y===xn.INTERSECTING?(l[h++]=d[0],l[h++]=d[1],p=!1):p=!0,f=d[0],c=d[1],v=y;return(s&&p||_===i+a)&&(l[h++]=f,l[h++]=c),h},e.prototype.drawCustomCoordinates_=function(t,i,r,a,s){for(var o=0,l=r.length;o<l;++o){var h=r[o],u=this.appendFlatLineCoordinates(t,i,h,a,!1,!1);s.push(u),i=h}return i},e.prototype.drawCustom=function(t,i,r,a){this.beginGeometry(t,i);var s=t.getType(),o=t.getStride(),l=this.coordinates.length,h,u,f,c,d;switch(s){case O.MULTI_POLYGON:h=t.getOrientedFlatCoordinates(),c=[];var p=t.getEndss();d=0;for(var _=0,v=p.length;_<v;++_){var y=[];d=this.drawCustomCoordinates_(h,d,p[_],o,y),c.push(y)}this.instructions.push([I.CUSTOM,l,c,t,r,Ni]),this.hitDetectionInstructions.push([I.CUSTOM,l,c,t,a||r,Ni]);break;case O.POLYGON:case O.MULTI_LINE_STRING:f=[],h=s==O.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(h,0,t.getEnds(),o,f),this.instructions.push([I.CUSTOM,l,f,t,r,ki]),this.hitDetectionInstructions.push([I.CUSTOM,l,f,t,a||r,ki]);break;case O.LINE_STRING:case O.CIRCLE:h=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(h,0,h.length,o,!1,!1),this.instructions.push([I.CUSTOM,l,u,t,r,Ht]),this.hitDetectionInstructions.push([I.CUSTOM,l,u,t,a||r,Ht]);break;case O.MULTI_POINT:h=t.getFlatCoordinates(),u=this.appendFlatPointCoordinates(h,o),u>l&&(this.instructions.push([I.CUSTOM,l,u,t,r,Ht]),this.hitDetectionInstructions.push([I.CUSTOM,l,u,t,a||r,Ht]));break;case O.POINT:h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),u=this.coordinates.length,this.instructions.push([I.CUSTOM,l,u,t,r]),this.hitDetectionInstructions.push([I.CUSTOM,l,u,t,a||r]);break}this.endGeometry(i)},e.prototype.beginGeometry=function(t,i){this.beginGeometryInstruction1_=[I.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[I.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var i,r=t.length,a,s,o=-1;for(i=0;i<r;++i)a=t[i],s=a[0],s==I.END_GEOMETRY?o=i:s==I.BEGIN_GEOMETRY&&(a[2]=i,Sn(this.hitDetectionInstructions,o,i),o=-1)},e.prototype.setFillStrokeStyle=function(t,i){var r=this.state;if(t){var a=t.getColor();r.fillStyle=it(a||ht)}else r.fillStyle=void 0;if(i){var s=i.getColor();r.strokeStyle=it(s||Kt);var o=i.getLineCap();r.lineCap=o!==void 0?o:Ce;var l=i.getLineDash();r.lineDash=l?l.slice():te;var h=i.getLineDashOffset();r.lineDashOffset=h||ee;var u=i.getLineJoin();r.lineJoin=u!==void 0?u:Ft;var f=i.getWidth();r.lineWidth=f!==void 0?f:Zt;var c=i.getMiterLimit();r.miterLimit=c!==void 0?c:Qt,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t){var i=t.fillStyle,r=[I.SET_FILL_STYLE,i];return typeof i!="string"&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[I.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,i){var r=t.fillStyle;(typeof r!="string"||t.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(i.call(this,t)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,i){var r=t.strokeStyle,a=t.lineCap,s=t.lineDash,o=t.lineDashOffset,l=t.lineJoin,h=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=a||s!=t.currentLineDash&&!Fe(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=l||t.currentLineWidth!=h||t.currentMiterLimit!=u)&&(r!==void 0&&i.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=a,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=l,t.currentLineWidth=h,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[I.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=En(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;ci(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(wr),ne=ja,za=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ja=function(n){za(e,n);function e(t,i,r,a){var s=n.call(this,t,i,r,a)||this;return s.hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s.declutterImageWithText_=void 0,s}return e.prototype.drawPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var r=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(r,a);this.instructions.push([I.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([I.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},e.prototype.drawMultiPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var r=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(r,a);this.instructions.push([I.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([I.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,n.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,i){var r=t.getAnchor(),a=t.getSize(),s=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),l=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=s,this.image_=o,this.height_=a[1],this.opacity_=t.getOpacity(),this.originX_=l[0]*this.imagePixelRatio_,this.originY_=l[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=a[0],this.declutterImageWithText_=i},e}(ne),qa=Ja,Ka=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Za=function(n){Ka(e,n);function e(t,i,r,a){return n.call(this,t,i,r,a)||this}return e.prototype.drawFlatCoordinates_=function(t,i,r,a){var s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,i,r,a,!1,!1),l=[I.MOVE_TO_LINE_TO,s,o];return this.instructions.push(l),this.hitDetectionInstructions.push(l),r},e.prototype.drawLineString=function(t,i){var r=this.state,a=r.strokeStyle,s=r.lineWidth;if(!(a===void 0||s===void 0)){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,te,ee],Et);var o=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(vt),this.endGeometry(i)}},e.prototype.drawMultiLineString=function(t,i){var r=this.state,a=r.strokeStyle,s=r.lineWidth;if(!(a===void 0||s===void 0)){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],Et);for(var o=t.getEnds(),l=t.getFlatCoordinates(),h=t.getStride(),u=0,f=0,c=o.length;f<c;++f)u=this.drawFlatCoordinates_(l,u,o[f],h);this.hitDetectionInstructions.push(vt),this.endGeometry(i)}},e.prototype.finish=function(){var t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(vt),this.reverseHitDetectionInstructions(),this.state=null,n.prototype.finish.call(this)},e.prototype.applyStroke=function(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(vt),t.lastStroke=this.coordinates.length),t.lastStroke=0,n.prototype.applyStroke.call(this,t),this.instructions.push(Et)},e}(ne),Qa=Za,ts=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),es=function(n){ts(e,n);function e(t,i,r,a){return n.call(this,t,i,r,a)||this}return e.prototype.drawFlatCoordinatess_=function(t,i,r,a){var s=this.state,o=s.fillStyle!==void 0,l=s.strokeStyle!==void 0,h=r.length;this.instructions.push(Et),this.hitDetectionInstructions.push(Et);for(var u=0;u<h;++u){var f=r[u],c=this.coordinates.length,d=this.appendFlatLineCoordinates(t,i,f,a,!0,!l),p=[I.MOVE_TO_LINE_TO,c,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),l&&(this.instructions.push(Hi),this.hitDetectionInstructions.push(Hi)),i=f}return o&&(this.instructions.push(ye),this.hitDetectionInstructions.push(ye)),l&&(this.instructions.push(vt),this.hitDetectionInstructions.push(vt)),i},e.prototype.drawCircle=function(t,i){var r=this.state,a=r.fillStyle,s=r.strokeStyle;if(!(a===void 0&&s===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_FILL_STYLE,ht]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getFlatCoordinates(),l=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);var u=[I.CIRCLE,h];this.instructions.push(Et,u),this.hitDetectionInstructions.push(Et,u),r.fillStyle!==void 0&&(this.instructions.push(ye),this.hitDetectionInstructions.push(ye)),r.strokeStyle!==void 0&&(this.instructions.push(vt),this.hitDetectionInstructions.push(vt)),this.endGeometry(i)}},e.prototype.drawPolygon=function(t,i){var r=this.state,a=r.fillStyle,s=r.strokeStyle;if(!(a===void 0&&s===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_FILL_STYLE,ht]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getEnds(),l=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(l,0,o,h),this.endGeometry(i)}},e.prototype.drawMultiPolygon=function(t,i){var r=this.state,a=r.fillStyle,s=r.strokeStyle;if(!(a===void 0&&s===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_FILL_STYLE,ht]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var o=t.getEndss(),l=t.getOrientedFlatCoordinates(),h=t.getStride(),u=0,f=0,c=o.length;f<c;++f)u=this.drawFlatCoordinatess_(l,u,o[f],h);this.endGeometry(i)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(t!==0)for(var i=this.coordinates,r=0,a=i.length;r<a;++r)i[r]=In(i[r],t);return n.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,i=t.fillStyle;i!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)},e}(ne),Vi=es,is={POINT:"point",LINE:"line"};function rs(n,e,t,i,r){var a=t,s=t,o=0,l=0,h=t,u,f,c,d,p,_,v,y,g,x;for(f=t;f<i;f+=r){var S=e[f],E=e[f+1];p!==void 0&&(g=S-p,x=E-_,d=Math.sqrt(g*g+x*x),v!==void 0&&(l+=c,u=Math.acos((v*g+y*x)/(c*d)),u>n&&(l>o&&(o=l,a=h,s=f),l=0,h=f-r)),c=d,v=g,y=x),p=S,_=E}return l+=d,l>o?[h,f]:[a,s]}var ns=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),De={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},as=function(n){ns(e,n);function e(t,i,r,a){var s=n.call(this,t,i,r,a)||this;return s.labels_=null,s.text_="",s.textOffsetX_=0,s.textOffsetY_=0,s.textRotateWithView_=void 0,s.textRotation_=0,s.textFillState_=null,s.fillStates={},s.textStrokeState_=null,s.strokeStates={},s.textState_={},s.textStates={},s.textKey_="",s.fillKey_="",s.strokeKey_="",s.declutterImageWithText_=void 0,s}return e.prototype.finish=function(){var t=n.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},e.prototype.drawText=function(t,i){var r=this.textFillState_,a=this.textStrokeState_,s=this.textState_;if(!(this.text_===""||!s||!r&&!a)){var o=this.coordinates,l=o.length,h=t.getType(),u=null,f=t.getStride();if(s.placement===is.LINE&&(h==O.LINE_STRING||h==O.MULTI_LINE_STRING||h==O.POLYGON||h==O.MULTI_POLYGON)){if(!tt(this.getBufferedMaxExtent(),t.getExtent()))return;var c=void 0;if(u=t.getFlatCoordinates(),h==O.LINE_STRING)c=[u.length];else if(h==O.MULTI_LINE_STRING)c=t.getEnds();else if(h==O.POLYGON)c=t.getEnds().slice(0,1);else if(h==O.MULTI_POLYGON){var d=t.getEndss();c=[];for(var p=0,_=d.length;p<_;++p)c.push(d[p][0])}this.beginGeometry(t,i);for(var v=s.textAlign,y=0,g=void 0,x=0,S=c.length;x<S;++x){if(v==null){var E=rs(s.maxAngle,u,y,c[x],f);y=E[0],g=E[1]}else g=c[x];for(var p=y;p<g;p+=f)o.push(u[p],u[p+1]);var T=o.length;y=c[x],this.drawChars_(l,T),l=T}this.endGeometry(i)}else{var R=s.overflow?null:[];switch(h){case O.POINT:case O.MULTI_POINT:u=t.getFlatCoordinates();break;case O.LINE_STRING:u=t.getFlatMidpoint();break;case O.CIRCLE:u=t.getCenter();break;case O.MULTI_LINE_STRING:u=t.getFlatMidpoints(),f=2;break;case O.POLYGON:u=t.getFlatInteriorPoint(),s.overflow||R.push(u[2]/this.resolution),f=3;break;case O.MULTI_POLYGON:var C=t.getFlatInteriorPoints();u=[];for(var p=0,_=C.length;p<_;p+=3)s.overflow||R.push(C[p+2]/this.resolution),u.push(C[p],C[p+1]);if(u.length===0)return;f=2;break}var T=this.appendFlatPointCoordinates(u,f);if(T===l)return;if(R&&(T-l)/2!==u.length/f){var w=l/2;R=R.filter(function(B,P){var b=o[(w+P)*2]===u[P*f]&&o[(w+P)*2+1]===u[P*f+1];return b||--w,b})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);var F=s.padding;if(F!=St&&(s.scale[0]<0||s.scale[1]<0)){var L=s.padding[0],D=s.padding[1],A=s.padding[2],N=s.padding[3];s.scale[0]<0&&(D=-D,N=-N),s.scale[1]<0&&(L=-L,A=-A),F=[L,D,A,N]}var $=this.pixelRatio;this.instructions.push([I.DRAW_IMAGE,l,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,F==St?St:F.map(function(B){return B*$}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,R]);var G=1/$;this.hitDetectionInstructions.push([I.DRAW_IMAGE,l,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[G,G],NaN,this.declutterImageWithText_,F,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,R]),this.endGeometry(i)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,i=this.textState_,r=this.textFillState_,a=this.strokeKey_;t&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:i.font,textAlign:i.textAlign||ie,textBaseline:i.textBaseline||Te,scale:i.scale});var o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))},e.prototype.drawChars_=function(t,i){var r=this.textStrokeState_,a=this.textState_,s=this.strokeKey_,o=this.textKey_,l=this.fillKey_;this.saveTextStates_();var h=this.pixelRatio,u=De[a.textBaseline],f=this.textOffsetY_*h,c=this.text_,d=r?r.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([I.DRAW_CHARS,t,i,u,a.overflow,l,a.maxAngle,h,f,s,d*h,c,o,1]),this.hitDetectionInstructions.push([I.DRAW_CHARS,t,i,u,a.overflow,l,a.maxAngle,1,f,s,d,c,o,1/h])},e.prototype.setTextStyle=function(t,i){var r,a,s;if(!t)this.text_="";else{var o=t.getFill();o?(a=this.textFillState_,a||(a={},this.textFillState_=a),a.fillStyle=it(o.getColor()||ht)):(a=null,this.textFillState_=a);var l=t.getStroke();if(!l)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);var h=l.getLineDash(),u=l.getLineDashOffset(),f=l.getWidth(),c=l.getMiterLimit();s.lineCap=l.getLineCap()||Ce,s.lineDash=h?h.slice():te,s.lineDashOffset=u===void 0?ee:u,s.lineJoin=l.getLineJoin()||Ft,s.lineWidth=f===void 0?Zt:f,s.miterLimit=c===void 0?Qt:c,s.strokeStyle=it(l.getColor()||Kt)}r=this.textState_;var d=t.getFont()||dr;Cn(d);var p=t.getScaleArray();r.overflow=t.getOverflow(),r.font=d,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||Te,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||St,r.scale=p===void 0?[1,1]:p;var _=t.getOffsetX(),v=t.getOffsetY(),y=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=_===void 0?0:_,this.textOffsetY_=v===void 0?0:v,this.textRotateWithView_=y===void 0?!1:y,this.textRotation_=g===void 0?0:g,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:X(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=a?typeof a.fillStyle=="string"?a.fillStyle:"|"+X(a.fillStyle):""}this.declutterImageWithText_=i},e}(ne),ss=as,os={Circle:Vi,Default:ne,Image:qa,LineString:Qa,Polygon:Vi,Text:ss},ls=function(){function n(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}return n.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var i=this.buildersByZIndex_[t];for(var r in i){var a=i[r].finish();e[t][r]=a}}return e},n.prototype.getBuilder=function(e,t){var i=e!==void 0?e.toString():"0",r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);var a=r[t];if(a===void 0){var s=os[t];a=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=a}return a},n}(),ji=ls,k={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function hs(n,e,t,i,r,a,s,o,l,h,u,f){var c=n[e],d=n[e+1],p=0,_=0,v=0,y=0;function g(){p=c,_=d,e+=i,c=n[e],d=n[e+1],y+=v,v=Math.sqrt((c-p)*(c-p)+(d-_)*(d-_))}do g();while(e<t-i&&y+v<a);for(var x=v===0?0:(a-y)/v,S=pt(p,c,x),E=pt(_,d,x),T=e-i,R=y,C=a+o*l(h,r,u);e<t-i&&y+v<C;)g();x=v===0?0:(C-y)/v;var w=pt(p,c,x),F=pt(_,d,x),L;if(f){var D=[S,E,w,F];Tn(D,0,4,2,f,D,D),L=D[0]>D[2]}else L=S>w;var A=Math.PI,N=[],$=T+i===e;e=T,v=0,y=R,c=n[e],d=n[e+1];var G;if($){g(),G=Math.atan2(d-_,c-p),L&&(G+=G>0?-A:A);var M=(w+S)/2,B=(F+E)/2;return N[0]=[M,B,(C-a)/2,G,r],N}for(var P=0,b=r.length;P<b;){g();var Y=Math.atan2(d-_,c-p);if(L&&(Y+=Y>0?-A:A),G!==void 0){var m=Y-G;if(m+=m>A?-2*A:m<-A?2*A:0,Math.abs(m)>s)return null}G=Y;for(var nt=P,at=0;P<b;++P){var Pt=L?b-P-1:P,se=o*l(h,r[Pt],u);if(e+i<t&&y+v<a+at+se/2)break;at+=se}if(P!==nt){var Be=L?r.substring(b-nt,b-P):r.substring(nt,P);x=v===0?0:(a+at/2-y)/v;var M=pt(p,c,x),B=pt(_,d,x);N.push([M,B,at/2,Y,Be]),a+=at}}return N}var wt=Oe(),ft=[],ot=[],lt=[],ct=[];function zi(n){return n[3].declutterBox}var us=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Ji(n,e){return(e==="start"||e==="end")&&!us.test(n)&&(e=e==="start"?"left":"right"),De[e]}var fs=function(){function n(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=we(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return n.prototype.createLabel=function(e,t,i,r){var a=e+t+i+r;if(this.labels_[a])return this.labels_[a];var s=r?this.strokeStates[r]:null,o=i?this.fillStates[i]:null,l=this.textStates[t],h=this.pixelRatio,u=[l.scale[0]*h,l.scale[1]*h],f=Ji(e,l.textAlign||ie),c=r&&s.lineWidth?s.lineWidth:0,d=e.split(`
`),p=d.length,_=[],v=wn(l.font,d,_),y=Rn(l.font),g=y*p,x=v+c,S=[],E=(x+2)*u[0],T=(g+c)*u[1],R={width:E<0?Math.floor(E):Math.ceil(E),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:S};if((u[0]!=1||u[1]!=1)&&S.push("scale",u),S.push("font",l.font),r){S.push("strokeStyle",s.strokeStyle),S.push("lineWidth",c),S.push("lineCap",s.lineCap),S.push("lineJoin",s.lineJoin),S.push("miterLimit",s.miterLimit);var C=On?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;C.prototype.setLineDash&&(S.push("setLineDash",[s.lineDash]),S.push("lineDashOffset",s.lineDashOffset))}i&&S.push("fillStyle",o.fillStyle),S.push("textBaseline","middle"),S.push("textAlign","center");var w=.5-f,F=f*x+w*c,L;if(r)for(L=0;L<p;++L)S.push("strokeText",[d[L],F+w*_[L],.5*(c+y)+L*y]);if(i)for(L=0;L<p;++L)S.push("fillText",[d[L],F+w*_[L],.5*(c+y)+L*y]);return this.labels_[a]=R,R},n.prototype.replayTextBackground_=function(e,t,i,r,a,s,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,a),e.lineTo.apply(e,t),s&&(this.alignFill_=s[2],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())},n.prototype.calculateImageOrLabelDimensions_=function(e,t,i,r,a,s,o,l,h,u,f,c,d,p,_,v){o*=c[0],l*=c[1];var y=i-o,g=r-l,x=a+h>e?e-h:a,S=s+u>t?t-u:s,E=p[3]+x*c[0]+p[1],T=p[0]+S*c[1]+p[2],R=y-p[3],C=g-p[0];(_||f!==0)&&(ft[0]=R,ct[0]=R,ft[1]=C,ot[1]=C,ot[0]=R+E,lt[0]=ot[0],lt[1]=C+T,ct[1]=lt[1]);var w;return f!==0?(w=Re(we(),i,r,1,1,f,-i,-r),Lt(w,ft),Lt(w,ot),Lt(w,lt),Lt(w,ct),oi(Math.min(ft[0],ot[0],lt[0],ct[0]),Math.min(ft[1],ot[1],lt[1],ct[1]),Math.max(ft[0],ot[0],lt[0],ct[0]),Math.max(ft[1],ot[1],lt[1],ct[1]),wt)):oi(Math.min(R,R+E),Math.min(C,C+T),Math.max(R,R+E),Math.max(C,C+T),wt),d&&(y=Math.round(y),g=Math.round(g)),{drawImageX:y,drawImageY:g,drawImageW:x,drawImageH:S,originX:h,originY:u,declutterBox:{minX:wt[0],minY:wt[1],maxX:wt[2],maxY:wt[3],value:v},canvasTransform:w,scale:c}},n.prototype.replayImageOrLabel_=function(e,t,i,r,a,s,o){var l=!!(s||o),h=r.declutterBox,u=e.canvas,f=o?o[2]*r.scale[0]/2:0,c=h.minX-f<=u.width/t&&h.maxX+f>=0&&h.minY-f<=u.height/t&&h.maxY+f>=0;return c&&(l&&this.replayTextBackground_(e,ft,ot,lt,ct,s,o),Ln(e,r.canvasTransform,a,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},n.prototype.fill_=function(e){if(this.alignFill_){var t=Lt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()},n.prototype.setStrokeStyle_=function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.setLineDash&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))},n.prototype.drawLabelWithPointPlacement_=function(e,t,i,r){var a=this.textStates[t],s=this.createLabel(e,t,r,i),o=this.strokeStates[i],l=this.pixelRatio,h=Ji(e,a.textAlign||ie),u=De[a.textBaseline||Te],f=o&&o.lineWidth?o.lineWidth:0,c=s.width/l-2*a.scale[0],d=h*c+2*(.5-h)*f,p=u*s.height/l+2*(.5-u)*f;return{label:s,anchorX:d,anchorY:p}},n.prototype.execute_=function(e,t,i,r,a,s,o,l){var h;this.pixelCoordinates_&&Fe(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Jt(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),Dn(this.renderedTransform_,i));for(var u=0,f=r.length,c=0,d,p,_,v,y,g,x,S,E,T,R,C,w=0,F=0,L=null,D=null,A=this.coordinateCache_,N=this.viewRotation_,$=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,G={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},M=this.instructions!=r||this.overlaps?0:200,B,P,b,Y;u<f;){var m=r[u],nt=m[0];switch(nt){case I.BEGIN_GEOMETRY:B=m[1],Y=m[3],B.getGeometry()?o!==void 0&&!tt(o,Y.getExtent())?u=m[2]+1:++u:u=m[2];break;case I.BEGIN_PATH:w>M&&(this.fill_(e),w=0),F>M&&(e.stroke(),F=0),!w&&!F&&(e.beginPath(),v=NaN,y=NaN),++u;break;case I.CIRCLE:c=m[1];var at=h[c],Pt=h[c+1],se=h[c+2],Be=h[c+3],xi=se-at,Si=Be-Pt,Ei=Math.sqrt(xi*xi+Si*Si);e.moveTo(at+Ei,Pt),e.arc(at,Pt,Ei,0,2*Math.PI,!0),++u;break;case I.CLOSE_PATH:e.closePath(),++u;break;case I.CUSTOM:c=m[1],d=m[2];var $r=m[3],Hr=m[4],Ii=m.length==6?m[5]:void 0;G.geometry=$r,G.feature=B,u in A||(A[u]=[]);var kt=A[u];Ii?Ii(h,c,d,2,kt):(kt[0]=h[c],kt[1]=h[c+1],kt.length=2),Hr(kt,G),++u;break;case I.DRAW_IMAGE:c=m[1],d=m[2],S=m[3],p=m[4],_=m[5];var Ge=m[6],Vr=m[7],jr=m[8],zr=m[9],Ci=m[10],Ye=m[11],Jr=m[12],oe=m[13],Nt=m[14];if(!S&&m.length>=19){E=m[18],T=m[19],R=m[20],C=m[21];var We=this.drawLabelWithPointPlacement_(E,T,R,C);S=We.label,m[3]=S;var qr=m[22];p=(We.anchorX-qr)*this.pixelRatio,m[4]=p;var Kr=m[23];_=(We.anchorY-Kr)*this.pixelRatio,m[5]=_,Ge=S.height,m[6]=Ge,oe=S.width,m[13]=oe}var Xe=void 0;m.length>24&&(Xe=m[24]);var Ue=void 0,le=void 0,he=void 0;m.length>16?(Ue=m[15],le=m[16],he=m[17]):(Ue=St,le=!1,he=!1),Ci&&$?Ye+=N:!Ci&&!$&&(Ye-=N);for(var Zr=0;c<d;c+=2)if(!(Xe&&Xe[Zr++]<oe/this.pixelRatio)){var st=this.calculateImageOrLabelDimensions_(S.width,S.height,h[c],h[c+1],oe,Ge,p,_,jr,zr,Ye,Jr,a,Ue,le||he,B),Ti=[e,t,S,st,Vr,le?L:null,he?D:null],ue=void 0,$e=void 0;if(l&&Nt){var fe=d-c;if(!Nt[fe]){Nt[fe]=Ti;continue}if(ue=Nt[fe],delete Nt[fe],$e=zi(ue),l.collides($e))continue}l&&l.collides(st.declutterBox)||(ue&&(l&&l.insert($e),this.replayImageOrLabel_.apply(this,ue)),l&&l.insert(st.declutterBox),this.replayImageOrLabel_.apply(this,Ti))}++u;break;case I.DRAW_CHARS:var wi=m[1],Ri=m[2],He=m[3],Qr=m[4];C=m[5];var tn=m[6],Oi=m[7],Li=m[8];R=m[9];var Ve=m[10];E=m[11],T=m[12];var Di=[m[13],m[13]],je=this.textStates[T],bt=je.font,Bt=[je.scale[0]*Oi,je.scale[1]*Oi],Gt=void 0;bt in this.widths_?Gt=this.widths_[bt]:(Gt={},this.widths_[bt]=Gt);var Fi=yr(h,wi,Ri,2),Ai=Math.abs(Bt[0])*bi(bt,E,Gt);if(Qr||Ai<=Fi){var en=this.textStates[T].textAlign,rn=(Fi-Ai)*De[en],Yt=hs(h,wi,Ri,2,E,rn,tn,Math.abs(Bt[0]),bi,bt,Gt,$?0:this.viewRotation_);t:if(Yt){var Wt=[],ut=void 0,ce=void 0,de=void 0,H=void 0,q=void 0;if(R)for(ut=0,ce=Yt.length;ut<ce;++ut){q=Yt[ut],de=q[4],H=this.createLabel(de,T,"",R),p=q[2]+(Bt[0]<0?-Ve:Ve),_=He*H.height+(.5-He)*2*Ve*Bt[1]/Bt[0]-Li;var st=this.calculateImageOrLabelDimensions_(H.width,H.height,q[0],q[1],H.width,H.height,p,_,0,0,q[3],Di,!1,St,!1,B);if(l&&l.collides(st.declutterBox))break t;Wt.push([e,t,H,st,1,null,null])}if(C)for(ut=0,ce=Yt.length;ut<ce;++ut){q=Yt[ut],de=q[4],H=this.createLabel(de,T,C,""),p=q[2],_=He*H.height-Li;var st=this.calculateImageOrLabelDimensions_(H.width,H.height,q[0],q[1],H.width,H.height,p,_,0,0,q[3],Di,!1,St,!1,B);if(l&&l.collides(st.declutterBox))break t;Wt.push([e,t,H,st,1,null,null])}l&&l.load(Wt.map(zi));for(var ze=0,nn=Wt.length;ze<nn;++ze)this.replayImageOrLabel_.apply(this,Wt[ze])}}++u;break;case I.END_GEOMETRY:if(s!==void 0){B=m[1];var Mi=s(B,Y);if(Mi)return Mi}++u;break;case I.FILL:M?w++:this.fill_(e),++u;break;case I.MOVE_TO_LINE_TO:for(c=m[1],d=m[2],P=h[c],b=h[c+1],g=P+.5|0,x=b+.5|0,(g!==v||x!==y)&&(e.moveTo(P,b),v=g,y=x),c+=2;c<d;c+=2)P=h[c],b=h[c+1],g=P+.5|0,x=b+.5|0,(c==d-2||g!==v||x!==y)&&(e.lineTo(P,b),v=g,y=x);++u;break;case I.SET_FILL_STYLE:L=m,this.alignFill_=m[2],w&&(this.fill_(e),w=0,F&&(e.stroke(),F=0)),e.fillStyle=m[1],++u;break;case I.SET_STROKE_STYLE:D=m,F&&(e.stroke(),F=0),this.setStrokeStyle_(e,m),++u;break;case I.STROKE:M?F++:e.stroke(),++u;break;default:++u;break}}w&&this.fill_(e),F&&e.stroke()},n.prototype.execute=function(e,t,i,r,a,s){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,a,void 0,void 0,s)},n.prototype.executeHitDetection=function(e,t,i,r,a){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,a)},n}(),cs=fs,Qe=[k.POLYGON,k.CIRCLE,k.LINE_STRING,k.IMAGE,k.TEXT,k.DEFAULT],ds=function(){function n(e,t,i,r,a,s){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=we(),this.createExecutors_(a)}return n.prototype.clip=function(e,t){var i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()},n.prototype.createExecutors_=function(e){for(var t in e){var i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);var r=e[t];for(var a in r){var s=r[a];i[a]=new cs(this.resolution_,this.pixelRatio_,this.overlaps_,s)}}},n.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[t],r=0,a=e.length;r<a;++r)if(e[r]in i)return!0;return!1},n.prototype.forEachFeatureAtCoordinate=function(e,t,i,r,a,s){r=Math.round(r);var o=r*2+1,l=Re(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=It(o,o));var u=this.hitDetectionContext_;u.canvas.width!==o||u.canvas.height!==o?(u.canvas.width=o,u.canvas.height=o):h||u.clearRect(0,0,o,o);var f;this.renderBuffer_!==void 0&&(f=Oe(),Fn(f,e),ci(f,t*(this.renderBuffer_+r),f));var c=ps(r),d;function p(T,R){for(var C=u.getImageData(0,0,o,o).data,w=0,F=c.length;w<F;w++)if(C[c[w]]>0){if(!s||d!==k.IMAGE&&d!==k.TEXT||s.indexOf(T)!==-1){var L=(c[w]-3)/4,D=r-L%o,A=r-(L/o|0),N=a(T,R,D*D+A*A);if(N)return N}u.clearRect(0,0,o,o);break}}var _=Object.keys(this.executorsByZIndex_).map(Number);_.sort(li);var v,y,g,x,S;for(v=_.length-1;v>=0;--v){var E=_[v].toString();for(g=this.executorsByZIndex_[E],y=Qe.length-1;y>=0;--y)if(d=Qe[y],x=g[d],x!==void 0&&(S=x.executeHitDetection(u,l,i,p,f),S))return S}},n.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var i=t[0],r=t[1],a=t[2],s=t[3],o=[i,r,i,s,a,s,a,r];return Jt(o,0,8,2,e,o),o},n.prototype.isEmpty=function(){return Le(this.executorsByZIndex_)},n.prototype.execute=function(e,t,i,r,a,s,o){var l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(li),this.maxExtent_&&(e.save(),this.clip(e,i));var h=s||Qe,u,f,c,d,p,_;for(o&&l.reverse(),u=0,f=l.length;u<f;++u){var v=l[u].toString();for(p=this.executorsByZIndex_[v],c=0,d=h.length;c<d;++c){var y=h[c];_=p[y],_!==void 0&&_.execute(e,t,i,r,a,o)}}this.maxExtent_&&e.restore()},n}(),ti={};function ps(n){if(ti[n]!==void 0)return ti[n];for(var e=n*2+1,t=n*n,i=new Array(t+1),r=0;r<=n;++r)for(var a=0;a<=n;++a){var s=r*r+a*a;if(s>t)break;var o=i[s];o||(o=[],i[s]=o),o.push(((n+r)*e+(n+a))*4+3),r>0&&o.push(((n-r)*e+(n+a))*4+3),a>0&&(o.push(((n+r)*e+(n-a))*4+3),r>0&&o.push(((n-r)*e+(n-a))*4+3))}for(var l=[],r=0,h=i.length;r<h;++r)i[r]&&l.push.apply(l,i[r]);return ti[n]=l,l}var qi=ds,_s=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),vs=function(n){_s(e,n);function e(t,i,r,a,s,o,l){var h=n.call(this)||this;return h.context_=t,h.pixelRatio_=i,h.extent_=r,h.transform_=a,h.viewRotation_=s,h.squaredTolerance_=o,h.userTransform_=l,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=we(),h}return e.prototype.drawImages_=function(t,i,r,a){if(!!this.image_){var s=Jt(t,i,r,a,this.transform_,this.pixelCoordinates_),o=this.context_,l=this.tmpLocalTransform_,h=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=h*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var f=0,c=s.length;f<c;f+=2){var d=s[f]-this.imageAnchorX_,p=s[f+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var _=d+this.imageAnchorX_,v=p+this.imageAnchorY_;Re(l,_,v,1,1,u,-_,-v),o.setTransform.apply(o,l),o.translate(_,v),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=h)}},e.prototype.drawText_=function(t,i,r,a){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var s=Jt(t,i,r,a,this.transform_,this.pixelCoordinates_),o=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);i<r;i+=a){var h=s[i]+this.textOffsetX_,u=s[i+1]+this.textOffsetY_;if(l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var f=Re(this.tmpLocalTransform_,h,u,1,1,l,-h,-u);o.setTransform.apply(o,f),o.translate(h,u),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&o.strokeText(this.text_,h,u),this.textFillState_&&o.fillText(this.text_,h,u)}}},e.prototype.moveToLineTo_=function(t,i,r,a,s){var o=this.context_,l=Jt(t,i,r,a,this.transform_,this.pixelCoordinates_);o.moveTo(l[0],l[1]);var h=l.length;s&&(h-=2);for(var u=2;u<h;u+=2)o.lineTo(l[u],l[u+1]);return s&&o.closePath(),r},e.prototype.drawRings_=function(t,i,r,a){for(var s=0,o=r.length;s<o;++s)i=this.moveToLineTo_(t,i,r[s],a,!0);return i},e.prototype.drawCircle=function(t){if(!!tt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=An(t,this.transform_,this.pixelCoordinates_),r=i[2]-i[0],a=i[3]-i[1],s=Math.sqrt(r*r+a*a),o=this.context_;o.beginPath(),o.arc(i[0],i[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){var i=t.getType();switch(i){case O.POINT:this.drawPoint(t);break;case O.LINE_STRING:this.drawLineString(t);break;case O.POLYGON:this.drawPolygon(t);break;case O.MULTI_POINT:this.drawMultiPoint(t);break;case O.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case O.MULTI_POLYGON:this.drawMultiPolygon(t);break;case O.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case O.CIRCLE:this.drawCircle(t);break}},e.prototype.drawFeature=function(t,i){var r=i.getGeometryFunction()(t);!r||!tt(this.extent_,r.getExtent())||(this.setStyle(i),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var i=t.getGeometriesArray(),r=0,a=i.length;r<a;++r)this.drawGeometry(i[r])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(i,0,i.length,r),this.text_!==""&&this.drawText_(i,0,i.length,r)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(i,0,i.length,r),this.text_!==""&&this.drawText_(i,0,i.length,r)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),i.stroke()}if(this.text_!==""){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getExtent();if(!!tt(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,a=t.getFlatCoordinates(),s=0,o=t.getEnds(),l=t.getStride();r.beginPath();for(var h=0,u=o.length;h<u;++h)s=this.moveToLineTo_(a,s,o[h],l,!1);r.stroke()}if(this.text_!==""){var f=t.getFlatMidpoints();this.drawText_(f,0,f.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getOrientedFlatCoordinates(),a=0,s=t.getEndss(),o=t.getStride();i.beginPath();for(var l=0,h=s.length;l<h;++l){var u=s[l];a=this.drawRings_(r,a,u,o)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var f=t.getFlatInteriorPoints();this.drawText_(f,0,f.length,2)}}},e.prototype.setContextFillState_=function(t){var i=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var i=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,i.lineCap=t.lineCap),i.setLineDash&&(Fe(r.lineDash,t.lineDash)||i.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var i=this.context_,r=this.contextTextState_,a=t.textAlign?t.textAlign:ie;r?(r.font!=t.font&&(r.font=t.font,i.font=t.font),r.textAlign!=a&&(r.textAlign=a,i.textAlign=a),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=a,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,i){var r=this;if(!t)this.fillState_=null;else{var a=t.getColor();this.fillState_={fillStyle:it(a||ht)}}if(!i)this.strokeState_=null;else{var s=i.getColor(),o=i.getLineCap(),l=i.getLineDash(),h=i.getLineDashOffset(),u=i.getLineJoin(),f=i.getWidth(),c=i.getMiterLimit(),d=l||te;this.strokeState_={lineCap:o!==void 0?o:Ce,lineDash:this.pixelRatio_===1?d:d.map(function(p){return p*r.pixelRatio_}),lineDashOffset:(h||ee)*this.pixelRatio_,lineJoin:u!==void 0?u:Ft,lineWidth:(f!==void 0?f:Zt)*this.pixelRatio_,miterLimit:c!==void 0?c:Qt,strokeStyle:it(s||Kt)}}},e.prototype.setImageStyle=function(t){var i;if(!t||!(i=t.getSize())){this.image_=null;return}var r=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=i[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=i[0]*this.pixelRatio_},e.prototype.setTextStyle=function(t){if(!t)this.text_="";else{var i=t.getFill();if(!i)this.textFillState_=null;else{var r=i.getColor();this.textFillState_={fillStyle:it(r||ht)}}var a=t.getStroke();if(!a)this.textStrokeState_=null;else{var s=a.getColor(),o=a.getLineCap(),l=a.getLineDash(),h=a.getLineDashOffset(),u=a.getLineJoin(),f=a.getWidth(),c=a.getMiterLimit();this.textStrokeState_={lineCap:o!==void 0?o:Ce,lineDash:l||te,lineDashOffset:h||ee,lineJoin:u!==void 0?u:Ft,lineWidth:f!==void 0?f:Zt,miterLimit:c!==void 0?c:Qt,strokeStyle:it(s||Kt)}}var d=t.getFont(),p=t.getOffsetX(),_=t.getOffsetY(),v=t.getRotateWithView(),y=t.getRotation(),g=t.getScaleArray(),x=t.getText(),S=t.getTextAlign(),E=t.getTextBaseline();this.textState_={font:d!==void 0?d:dr,textAlign:S!==void 0?S:ie,textBaseline:E!==void 0?E:Te},this.text_=x!==void 0?x:"",this.textOffsetX_=p!==void 0?this.pixelRatio_*p:0,this.textOffsetY_=_!==void 0?this.pixelRatio_*_:0,this.textRotateWithView_=v!==void 0?v:!1,this.textRotation_=y!==void 0?y:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}},e}(wr),gs=vs,_t={FRACTION:"fraction",PIXELS:"pixels"},K={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},ys=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$t=null,ms=function(n){ys(e,n);function e(t,i,r,a,s,o){var l=n.call(this)||this;return l.hitDetectionImage_=null,l.image_=t||new Image,a!==null&&(l.image_.crossOrigin=a),l.canvas_={},l.color_=o,l.unlisten_=null,l.imageState_=s,l.size_=r,l.src_=i,l.tainted_,l}return e.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===V.LOADED){$t||($t=It(1,1)),$t.drawImage(this.image_,0,0);try{$t.getImageData(0,0,1,1),this.tainted_=!1}catch{$t=null,this.tainted_=!0}}return this.tainted_===!0},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(qt.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=V.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=V.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],i=this.size_[1],r=It(t,i);r.fillRect(0,0,t,i),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==V.IDLE){this.imageState_=V.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Mn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(!(!this.color_||this.canvas_[t]||this.imageState_!==V.LOADED)){var i=document.createElement("canvas");this.canvas_[t]=i,i.width=Math.ceil(this.image_.width*t),i.height=Math.ceil(this.image_.height*t);var r=i.getContext("2d");if(r.scale(t,t),r.drawImage(this.image_,0,0),r.globalCompositeOperation="multiply",r.globalCompositeOperation==="multiply"||this.isTainted_())r.fillStyle=Pn(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(this.image_,0,0);else{for(var a=r.getImageData(0,0,i.width,i.height),s=a.data,o=this.color_[0]/255,l=this.color_[1]/255,h=this.color_[2]/255,u=this.color_[3],f=0,c=s.length;f<c;f+=4)s[f]*=o,s[f+1]*=l,s[f+2]*=h,s[f+3]*=u;r.putImageData(a,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(kn);function xs(n,e,t,i,r,a){var s=Bi.get(e,i,a);return s||(s=new ms(n,e,t,i,r,a),Bi.set(e,i,a,s)),s}var Ss=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Es=function(n){Ss(e,n);function e(t){var i=this,r=t||{},a=r.opacity!==void 0?r.opacity:1,s=r.rotation!==void 0?r.rotation:0,o=r.scale!==void 0?r.scale:1,l=r.rotateWithView!==void 0?r.rotateWithView:!1;i=n.call(this,{opacity:a,rotation:s,scale:o,displacement:r.displacement!==void 0?r.displacement:[0,0],rotateWithView:l})||this,i.anchor_=r.anchor!==void 0?r.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=r.anchorOrigin!==void 0?r.anchorOrigin:K.TOP_LEFT,i.anchorXUnits_=r.anchorXUnits!==void 0?r.anchorXUnits:_t.FRACTION,i.anchorYUnits_=r.anchorYUnits!==void 0?r.anchorYUnits:_t.FRACTION,i.crossOrigin_=r.crossOrigin!==void 0?r.crossOrigin:null;var h=r.img!==void 0?r.img:null,u=r.imgSize!==void 0?r.imgSize:null,f=r.src;gt(!(f!==void 0&&h),4),gt(!h||h&&u,5),(f===void 0||f.length===0)&&h&&(f=h.src||X(h)),gt(f!==void 0&&f.length>0,6);var c=r.src!==void 0?V.IDLE:V.LOADED;return i.color_=r.color!==void 0?cr(r.color):null,i.iconImage_=xs(h,f,u,i.crossOrigin_,c,i.color_),i.offset_=r.offset!==void 0?r.offset:[0,0],i.offsetOrigin_=r.offsetOrigin!==void 0?r.offsetOrigin:K.TOP_LEFT,i.origin_=null,i.size_=r.size!==void 0?r.size:null,i}return e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:this.size_!==null?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var i=this.getSize();if(this.anchorXUnits_==_t.FRACTION||this.anchorYUnits_==_t.FRACTION){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_==_t.FRACTION&&(t[0]*=i[0]),this.anchorYUnits_==_t.FRACTION&&(t[1]*=i[1])}if(this.anchorOrigin_!=K.TOP_LEFT){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==K.TOP_RIGHT||this.anchorOrigin_==K.BOTTOM_RIGHT)&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_==K.BOTTOM_LEFT||this.anchorOrigin_==K.BOTTOM_RIGHT)&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}var r=this.getDisplacement();return[t[0]-r[0],t[1]+r[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=K.TOP_LEFT){var i=this.getSize(),r=this.iconImage_.getSize();if(!i||!r)return null;t=t.slice(),(this.offsetOrigin_==K.TOP_RIGHT||this.offsetOrigin_==K.BOTTOM_RIGHT)&&(t[0]=r[0]-i[0]-t[0]),(this.offsetOrigin_==K.BOTTOM_LEFT||this.offsetOrigin_==K.BOTTOM_RIGHT)&&(t[1]=r[1]-i[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(qt.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(qt.CHANGE,t)},e}(Sr),Rr=Es,et=.5;function Is(n,e,t,i,r,a,s){var o=n[0]*et,l=n[1]*et,h=It(o,l);h.imageSmoothingEnabled=!1;for(var u=h.canvas,f=new gs(h,et,r,null,s),c=t.length,d=Math.floor((256*256*256-1)/c),p={},_=1;_<=c;++_){var v=t[_-1],y=v.getStyleFunction()||i;if(!!i){var g=y(v,a);if(!!g){Array.isArray(g)||(g=[g]);for(var x=_*d,S="#"+("000000"+x.toString(16)).slice(-6),E=0,T=g.length;E<T;++E){var R=g[E],C=R.getGeometryFunction()(v);if(!(!C||!tt(r,C.getExtent()))){var w=R.clone(),F=w.getFill();F&&F.setColor(S);var L=w.getStroke();L&&(L.setColor(S),L.setLineDash(null)),w.setText(void 0);var D=R.getImage();if(D&&D.getOpacity()!==0){var A=D.getImageSize();if(!A)continue;var N=It(A[0],A[1],void 0,{alpha:!1}),$=N.canvas;N.fillStyle=S,N.fillRect(0,0,$.width,$.height),w.setImage(new Rr({img:$,imgSize:A,anchor:D.getAnchor(),anchorXUnits:_t.PIXELS,anchorYUnits:_t.PIXELS,offset:D.getOrigin(),opacity:1,size:D.getSize(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}var G=w.getZIndex()||0,M=p[G];M||(M={},p[G]=M,M[O.POLYGON]=[],M[O.CIRCLE]=[],M[O.LINE_STRING]=[],M[O.POINT]=[]),M[C.getType().replace("Multi","")].push(C,w)}}}}}for(var B=Object.keys(p).map(Number).sort(li),_=0,P=B.length;_<P;++_){var M=p[B[_]];for(var b in M)for(var Y=M[b],E=0,T=Y.length;E<T;E+=2){f.setStyle(Y[E+1]);for(var m=0,nt=e.length;m<nt;++m)f.setTransform(e[m]),f.drawGeometry(Y[E])}}return h.getImageData(0,0,u.width,u.height)}function Cs(n,e,t){var i=[];if(t){var r=Math.floor(Math.round(n[0])*et),a=Math.floor(Math.round(n[1])*et),s=(Gi(r,0,t.width-1)+Gi(a,0,t.height-1)*t.width)*4,o=t.data[s],l=t.data[s+1],h=t.data[s+2],u=h+256*(l+256*o),f=Math.floor((256*256*256-1)/e.length);u&&u%f===0&&i.push(e[u/f-1])}return i}var Ts=.5,Or={Point:Ps,LineString:Fs,Polygon:Ns,MultiPoint:ks,MultiLineString:As,MultiPolygon:Ms,GeometryCollection:Ds,Circle:Os};function ws(n,e){return parseInt(X(n),10)-parseInt(X(e),10)}function Rs(n,e){var t=hi(n,e);return t*t}function hi(n,e){return Ts*n/e}function Os(n,e,t,i,r){var a=t.getFill(),s=t.getStroke();if(a||s){var o=n.getBuilder(t.getZIndex(),k.CIRCLE);o.setFillStrokeStyle(a,s),o.drawCircle(e,i)}var l=t.getText();if(l&&l.getText()){var h=(r||n).getBuilder(t.getZIndex(),k.TEXT);h.setTextStyle(l),h.drawText(e,i)}}function Ki(n,e,t,i,r,a,s){var o=!1,l=t.getImage();if(l){var h=l.getImageState();h==V.LOADED||h==V.ERROR?l.unlistenImageChange(r):(h==V.IDLE&&l.load(),h=l.getImageState(),l.listenImageChange(r),o=!0)}return Ls(n,e,t,i,a,s),o}function Ls(n,e,t,i,r,a){var s=t.getGeometryFunction()(e);if(!!s){var o=s.simplifyTransformed(i,r),l=t.getRenderer();if(l)Lr(n,o,t,e);else{var h=Or[o.getType()];h(n,o,t,e,a)}}}function Lr(n,e,t,i){if(e.getType()==O.GEOMETRY_COLLECTION){for(var r=e.getGeometries(),a=0,s=r.length;a<s;++a)Lr(n,r[a],t,i);return}var o=n.getBuilder(t.getZIndex(),k.DEFAULT);o.drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function Ds(n,e,t,i,r){var a=e.getGeometriesArray(),s,o;for(s=0,o=a.length;s<o;++s){var l=Or[a[s].getType()];l(n,a[s],t,i,r)}}function Fs(n,e,t,i,r){var a=t.getStroke();if(a){var s=n.getBuilder(t.getZIndex(),k.LINE_STRING);s.setFillStrokeStyle(null,a),s.drawLineString(e,i)}var o=t.getText();if(o&&o.getText()){var l=(r||n).getBuilder(t.getZIndex(),k.TEXT);l.setTextStyle(o),l.drawText(e,i)}}function As(n,e,t,i,r){var a=t.getStroke();if(a){var s=n.getBuilder(t.getZIndex(),k.LINE_STRING);s.setFillStrokeStyle(null,a),s.drawMultiLineString(e,i)}var o=t.getText();if(o&&o.getText()){var l=(r||n).getBuilder(t.getZIndex(),k.TEXT);l.setTextStyle(o),l.drawText(e,i)}}function Ms(n,e,t,i,r){var a=t.getFill(),s=t.getStroke();if(s||a){var o=n.getBuilder(t.getZIndex(),k.POLYGON);o.setFillStrokeStyle(a,s),o.drawMultiPolygon(e,i)}var l=t.getText();if(l&&l.getText()){var h=(r||n).getBuilder(t.getZIndex(),k.TEXT);h.setTextStyle(l),h.drawText(e,i)}}function Ps(n,e,t,i,r){var a=t.getImage(),s=t.getText(),o;if(r&&(n=r,o=a&&s&&s.getText()?{}:void 0),a){if(a.getImageState()!=V.LOADED)return;var l=n.getBuilder(t.getZIndex(),k.IMAGE);l.setImageStyle(a,o),l.drawPoint(e,i)}if(s&&s.getText()){var h=n.getBuilder(t.getZIndex(),k.TEXT);h.setTextStyle(s,o),h.drawText(e,i)}}function ks(n,e,t,i,r){var a=t.getImage(),s=t.getText(),o;if(r&&(n=r,o=a&&s&&s.getText()?{}:void 0),a){if(a.getImageState()!=V.LOADED)return;var l=n.getBuilder(t.getZIndex(),k.IMAGE);l.setImageStyle(a,o),l.drawMultiPoint(e,i)}if(s&&s.getText()){var h=(r||n).getBuilder(t.getZIndex(),k.TEXT);h.setTextStyle(s,o),h.drawText(e,i)}}function Ns(n,e,t,i,r){var a=t.getFill(),s=t.getStroke();if(a||s){var o=n.getBuilder(t.getZIndex(),k.POLYGON);o.setFillStrokeStyle(a,s),o.drawPolygon(e,i)}var l=t.getText();if(l&&l.getText()){var h=(r||n).getBuilder(t.getZIndex(),k.TEXT);h.setTextStyle(l),h.drawText(e,i)}}var bs=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Bs=function(n){bs(e,n);function e(t){var i=n.call(this,t)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=Oe(),i.wrappedRenderedExtent_=Oe(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return e.prototype.renderWorlds=function(t,i,r){var a=i.extent,s=i.viewState,o=s.center,l=s.resolution,h=s.projection,u=s.rotation,f=h.getExtent(),c=this.getLayer().getSource(),d=i.pixelRatio,p=i.viewHints,_=!(p[pe.ANIMATING]||p[pe.INTERACTING]),v=this.context,y=Math.round(i.size[0]*d),g=Math.round(i.size[1]*d),x=c.getWrapX()&&h.canWrapX(),S=x?_e(f):null,E=x?Math.ceil((a[2]-f[2])/S)+1:1,T=x?Math.floor((a[0]-f[0])/S):0;do{var R=this.getRenderTransform(o,l,u,d,y,g,T*S);t.execute(v,1,R,u,_,void 0,r)}while(++T<E)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,i){var r=t.pixelRatio,a=t.layerStatesArray[t.layerIndex];Nn(this.pixelTransform,1/r,1/r),bn(this.inversePixelTransform,this.pixelTransform);var s=Bn(this.pixelTransform);this.useContainer(i,s,a.opacity,this.getBackground(t));var o=this.context,l=o.canvas,h=this.replayGroup_,u=this.declutterExecutorGroup;if((!h||h.isEmpty())&&(!u||u.isEmpty()))return null;var f=Math.round(t.size[0]*r),c=Math.round(t.size[1]*r);l.width!=f||l.height!=c?(l.width=f,l.height=c,l.style.transform!==s&&(l.style.transform=s)):this.containerReused||o.clearRect(0,0,f,c),this.preRender(o,t);var d=t.viewState;d.projection;var p=!1,_=!0;if(a.extent&&this.clipping){var v=Gn(a.extent);_=tt(v,t.extent),p=_&&!Vt(v,t.extent),p&&this.clipUnrotated(o,t,v)}_&&this.renderWorlds(h,t),p&&o.restore(),this.postRender(o,t);var y=Yn(a.opacity),g=this.container;return y!==g.style.opacity&&(g.style.opacity=y),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];Lt(this.pixelTransform,r);var a=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,l=this.renderedProjection_,h=this.wrappedRenderedExtent_,u=this.getLayer(),f=[],c=r[0]*et,d=r[1]*et;f.push(this.getRenderTransform(a,s,o,et,c,d,0).slice());var p=u.getSource(),_=l.getExtent();if(p.getWrapX()&&l.canWrapX()&&!Vt(_,h)){for(var v=h[0],y=_e(_),g=0,x=void 0;v<_[0];)--g,x=y*g,f.push(this.getRenderTransform(a,s,o,et,c,d,x).slice()),v+=y;for(g=0,v=h[2];v>_[2];)++g,x=y*g,f.push(this.getRenderTransform(a,s,o,et,c,d,x).slice()),v-=y}this.hitDetectionImageData_=Is(r,f,this.renderedFeatures_,u.getStyleFunction(),h,s,o)}i(Cs(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,i,r,a,s){var o=this;if(!!this.replayGroup_){var l=i.viewState.resolution,h=i.viewState.rotation,u=this.getLayer(),f={},c=function(_,v,y){var g=X(_),x=f[g];if(x){if(x!==!0&&y<x.distanceSq){if(y===0)return f[g]=!0,s.splice(s.lastIndexOf(x),1),a(_,u,v);x.geometry=v,x.distanceSq=y}}else{if(y===0)return f[g]=!0,a(_,u,v);s.push(f[g]={feature:_,layer:u,geometry:v,distanceSq:y,callback:a})}},d,p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(function(_){return d=_.forEachFeatureAtCoordinate(t,l,h,r,c,_===o.declutterExecutorGroup&&i.declutterTree?i.declutterTree.all().map(function(v){return v.value}):null)}),d}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var i=this.getLayer(),r=i.getSource();if(!r)return!1;var a=t.viewHints[pe.ANIMATING],s=t.viewHints[pe.INTERACTING],o=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(!this.dirty_&&!o&&a||!l&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var h=t.extent,u=t.viewState,f=u.projection,c=u.resolution,d=t.pixelRatio,p=i.getRevision(),_=i.getRenderBuffer(),v=i.getRenderOrder();v===void 0&&(v=ws);var y=u.center.slice(),g=ci(h,_*c),x=g.slice(),S=[g.slice()],E=f.getExtent();if(r.getWrapX()&&f.canWrapX()&&!Vt(E,t.extent)){var T=_e(E),R=Math.max(_e(g)/2,T);g[0]=E[0]-R,g[2]=E[2]+R,Wn(y,f);var C=Xn(S[0],f);C[0]<E[0]&&C[2]<E[2]?S.push([C[0]+T,C[1],C[2]+T,C[3]]):C[0]>E[0]&&C[2]>E[2]&&S.push([C[0]-T,C[1],C[2]-T,C[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==p&&this.renderedRenderOrder_==v&&Vt(this.wrappedRenderedExtent_,g))return Fe(this.renderedExtent_,x)||(this.hitDetectionImageData_=null,this.renderedExtent_=x),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var w=new ji(hi(c,d),g,c,d),F;this.getLayer().getDeclutter()&&(F=new ji(hi(c,d),g,c,d));for(var L,D,A,D=0,A=S.length;D<A;++D)r.loadFeatures(S[D],c,f);var N=Rs(c,d),$=function(b){var Y,m=b.getStyleFunction()||i.getStyleFunction();if(m&&(Y=m(b,c)),Y){var nt=this.renderFeature(b,N,Y,w,L,F);this.dirty_=this.dirty_||nt}}.bind(this),G=$n(g),M=r.getFeaturesInExtent(G);v&&M.sort(v);for(var D=0,A=M.length;D<A;++D)$(M[D]);this.renderedFeatures_=M;var B=w.finish(),P=new qi(g,c,d,r.getOverlaps(),B,i.getRenderBuffer());return F&&(this.declutterExecutorGroup=new qi(g,c,d,r.getOverlaps(),F.finish(),i.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=p,this.renderedRenderOrder_=v,this.renderedExtent_=x,this.wrappedRenderedExtent_=g,this.renderedCenter_=y,this.renderedProjection_=f,this.replayGroup_=P,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,i,r,a,s,o){if(!r)return!1;var l=!1;if(Array.isArray(r))for(var h=0,u=r.length;h<u;++h)l=Ki(a,t,r[h],i,this.boundHandleStyleImageChange_,s,o)||l;else l=Ki(a,t,r,i,this.boundHandleStyleImageChange_,s,o);return l},e}(Un),Gs=Bs,Ys=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ws=function(n){Ys(e,n);function e(t){return n.call(this,t)||this}return e.prototype.createRenderer=function(){return new Gs(this)},e}($a),Xs=Ws,Us=function(){function n(e){this.rbush_=new xr(e),this.items_={}}return n.prototype.insert=function(e,t){var i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[X(t)]=i},n.prototype.load=function(e,t){for(var i=new Array(t.length),r=0,a=t.length;r<a;r++){var s=e[r],o=t[r],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:o};i[r]=l,this.items_[X(o)]=l}this.rbush_.load(i)},n.prototype.remove=function(e){var t=X(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null},n.prototype.update=function(e,t){var i=this.items_[X(t)],r=[i.minX,i.minY,i.maxX,i.maxY];pr(r,e)||(this.remove(t),this.insert(e,t))},n.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(t){return t.value})},n.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},i=this.rbush_.search(t);return i.map(function(r){return r.value})},n.prototype.forEach=function(e){return this.forEach_(this.getAll(),e)},n.prototype.forEachInExtent=function(e,t){return this.forEach_(this.getInExtent(e),t)},n.prototype.forEach_=function(e,t){for(var i,r=0,a=e.length;r<a;r++)if(i=t(e[r]),i)return i;return i},n.prototype.isEmpty=function(){return Le(this.items_)},n.prototype.clear=function(){this.rbush_.clear(),this.items_={}},n.prototype.getExtent=function(e){var t=this.rbush_.toJSON();return oi(t.minX,t.minY,t.maxX,t.maxY,e)},n.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var t in e.items_)this.items_[t]=e.items_[t]},n}(),Zi=Us,Q={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function $s(n,e){return[[-1/0,-1/0,1/0,1/0]]}var Hs=!1;function Vs(n,e,t,i,r,a,s){var o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()==Xt.ARRAY_BUFFER&&(o.responseType="arraybuffer"),o.withCredentials=Hs,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){var h=e.getType(),u=void 0;h==Xt.JSON||h==Xt.TEXT?u=o.responseText:h==Xt.XML?(u=o.responseXML,u||(u=new DOMParser().parseFromString(o.responseText,"application/xml"))):h==Xt.ARRAY_BUFFER&&(u=o.response),u?a(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):s()}else s()},o.onerror=s,o.send()}function Qi(n,e){return function(t,i,r,a,s){var o=this;Vs(n,e,t,i,r,function(l,h){o.addFeatures(l),a!==void 0&&a(l)},s||_r)}}var Dr=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),dt=function(n){Dr(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.feature=i,a.features=r,a}return e}(Hn),js=function(n){Dr(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:Vn.READY,wrapX:r.wrapX!==void 0?r.wrapX:!0})||this,i.on,i.once,i.un,i.loader_=_r,i.format_=r.format,i.overlaps_=r.overlaps===void 0?!0:r.overlaps,i.url_=r.url,r.loader!==void 0?i.loader_=r.loader:i.url_!==void 0&&(gt(i.format_,7),i.loader_=Qi(i.url_,i.format_)),i.strategy_=r.strategy!==void 0?r.strategy:$s;var a=r.useSpatialIndex!==void 0?r.useSpatialIndex:!0;i.featuresRtree_=a?new Zi:null,i.loadedExtentsRtree_=new Zi,i.loadingExtentsCount_=0,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null;var s,o;return Array.isArray(r.features)?o=r.features:r.features&&(s=r.features,o=s.getArray()),!a&&s===void 0&&(s=new jn(o)),o!==void 0&&i.addFeaturesInternal(o),s!==void 0&&i.bindFeaturesCollection_(s),i}return e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var i=X(t);if(!this.addToIndex_(i,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(i,t);var r=t.getGeometry();if(r){var a=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(a,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new dt(Q.ADDFEATURE,t))},e.prototype.setupChangeEvents_=function(t,i){this.featureChangeKeys_[t]=[si(i,qt.CHANGE,this.handleFeatureChange_,this),si(i,zn.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,i){var r=!0,a=i.getId();return a!==void 0&&(a.toString()in this.idIndex_?r=!1:this.idIndex_[a.toString()]=i),r&&(gt(!(t in this.uidIndex_),30),this.uidIndex_[t]=i),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var i=[],r=[],a=[],s=0,o=t.length;s<o;s++){var l=t[s],h=X(l);this.addToIndex_(h,l)&&r.push(l)}for(var s=0,u=r.length;s<u;s++){var l=r[s],h=X(l);this.setupChangeEvents_(h,l);var f=l.getGeometry();if(f){var c=f.getExtent();i.push(c),a.push(l)}else this.nullGeometryFeatures_[h]=l}this.featuresRtree_&&this.featuresRtree_.load(i,a);for(var s=0,d=r.length;s<d;s++)this.dispatchEvent(new dt(Q.ADDFEATURE,r[s]))},e.prototype.bindFeaturesCollection_=function(t){var i=!1;this.addEventListener(Q.ADDFEATURE,function(r){i||(i=!0,t.push(r.feature),i=!1)}),this.addEventListener(Q.REMOVEFEATURE,function(r){i||(i=!0,t.remove(r.feature),i=!1)}),t.addEventListener(Yi.ADD,function(r){i||(i=!0,this.addFeature(r.element),i=!1)}.bind(this)),t.addEventListener(Yi.REMOVE,function(r){i||(i=!0,this.removeFeature(r.element),i=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var i in this.featureChangeKeys_){var r=this.featureChangeKeys_[i];r.forEach(ai)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var a=function(l){this.removeFeatureInternal(l)}.bind(this);this.featuresRtree_.forEach(a);for(var s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var o=new dt(Q.CLEAR);this.dispatchEvent(o),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,i){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(a){var s=a.getGeometry();if(s.intersectsCoordinate(t))return i(a)})},e.prototype.forEachFeatureInExtent=function(t,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)},e.prototype.forEachFeatureIntersectingExtent=function(t,i){return this.forEachFeatureInExtent(t,function(r){var a=r.getGeometry();if(a.intersectsExtent(t)){var s=i(r);if(s)return s}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Le(this.nullGeometryFeatures_)||fr(t,Jn(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var i=[];return this.forEachFeatureAtCoordinateDirect(t,function(r){i.push(r)}),i},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,i){var r=t[0],a=t[1],s=null,o=[NaN,NaN],l=1/0,h=[-1/0,-1/0,1/0,1/0],u=i||Kn;return this.featuresRtree_.forEachInExtent(h,function(f){if(u(f)){var c=f.getGeometry(),d=l;if(l=c.closestPointXY(r,a,o,l),l<d){s=f;var p=Math.sqrt(l);h[0]=r-p,h[1]=a-p,h[2]=r+p,h[3]=a+p}}}),s},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var i=this.idIndex_[t.toString()];return i!==void 0?i:null},e.prototype.getFeatureByUid=function(t){var i=this.uidIndex_[t];return i!==void 0?i:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var i=t.target,r=X(i),a=i.getGeometry();if(!a)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[r]=i);else{var s=a.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(s,i)):this.featuresRtree_&&this.featuresRtree_.update(s,i)}var o=i.getId();if(o!==void 0){var l=o.toString();this.idIndex_[l]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[l]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[r]=i;this.changed(),this.dispatchEvent(new dt(Q.CHANGEFEATURE,i))},e.prototype.hasFeature=function(t){var i=t.getId();return i!==void 0?i in this.idIndex_:X(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Le(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,i,r){for(var a=this.loadedExtentsRtree_,s=this.strategy_(t,i,r),o=function(f,c){var d=s[f],p=a.forEachInExtent(d,function(_){return Vt(_.extent,d)});p||(++l.loadingExtentsCount_,l.dispatchEvent(new dt(Q.FEATURESLOADSTART)),l.loader_.call(l,d,i,r,function(_){--this.loadingExtentsCount_,this.dispatchEvent(new dt(Q.FEATURESLOADEND,void 0,_))}.bind(l),function(){--this.loadingExtentsCount_,this.dispatchEvent(new dt(Q.FEATURESLOADERROR))}.bind(l)),a.insert(d,{extent:d.slice()}))},l=this,h=0,u=s.length;h<u;++h)o(h);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),n.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var i=this.loadedExtentsRtree_,r;i.forEachInExtent(t,function(a){if(pr(a.extent,t))return r=a,!0}),r&&i.remove(r)},e.prototype.removeFeature=function(t){if(!!t){var i=X(t);i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t);var r=this.removeFeatureInternal(t);r&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var i=X(t),r=this.featureChangeKeys_[i];if(!!r){r.forEach(ai),delete this.featureChangeKeys_[i];var a=t.getId();return a!==void 0&&delete this.idIndex_[a.toString()],delete this.uidIndex_[i],this.dispatchEvent(new dt(Q.REMOVEFEATURE,t)),t}},e.prototype.removeFromIdIndex_=function(t){var i=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],i=!0;break}return i},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){gt(this.format_,7),this.url_=t,this.setLoader(Qi(t,this.format_))},e}(qn),zs=js,pi={exports:{}},Fr=function(e,t){return function(){for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];return e.apply(t,r)}},Js=Fr,yt=Object.prototype.toString;function _i(n){return Array.isArray(n)}function ui(n){return typeof n=="undefined"}function qs(n){return n!==null&&!ui(n)&&n.constructor!==null&&!ui(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function Ar(n){return yt.call(n)==="[object ArrayBuffer]"}function Ks(n){return yt.call(n)==="[object FormData]"}function Zs(n){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Ar(n.buffer),e}function Qs(n){return typeof n=="string"}function to(n){return typeof n=="number"}function Mr(n){return n!==null&&typeof n=="object"}function Se(n){if(yt.call(n)!=="[object Object]")return!1;var e=Object.getPrototypeOf(n);return e===null||e===Object.prototype}function eo(n){return yt.call(n)==="[object Date]"}function io(n){return yt.call(n)==="[object File]"}function ro(n){return yt.call(n)==="[object Blob]"}function Pr(n){return yt.call(n)==="[object Function]"}function no(n){return Mr(n)&&Pr(n.pipe)}function ao(n){return yt.call(n)==="[object URLSearchParams]"}function so(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function oo(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function vi(n,e){if(!(n===null||typeof n=="undefined"))if(typeof n!="object"&&(n=[n]),_i(n))for(var t=0,i=n.length;t<i;t++)e.call(null,n[t],t,n);else for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.call(null,n[r],r,n)}function fi(){var n={};function e(r,a){Se(n[a])&&Se(r)?n[a]=fi(n[a],r):Se(r)?n[a]=fi({},r):_i(r)?n[a]=r.slice():n[a]=r}for(var t=0,i=arguments.length;t<i;t++)vi(arguments[t],e);return n}function lo(n,e,t){return vi(e,function(r,a){t&&typeof r=="function"?n[a]=Js(r,t):n[a]=r}),n}function ho(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}var j={isArray:_i,isArrayBuffer:Ar,isBuffer:qs,isFormData:Ks,isArrayBufferView:Zs,isString:Qs,isNumber:to,isObject:Mr,isPlainObject:Se,isUndefined:ui,isDate:eo,isFile:io,isBlob:ro,isFunction:Pr,isStream:no,isURLSearchParams:ao,isStandardBrowserEnv:oo,forEach:vi,merge:fi,extend:lo,trim:so,stripBOM:ho},Rt=j;function tr(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var kr=function(e,t,i){if(!t)return e;var r;if(i)r=i(t);else if(Rt.isURLSearchParams(t))r=t.toString();else{var a=[];Rt.forEach(t,function(l,h){l===null||typeof l=="undefined"||(Rt.isArray(l)?h=h+"[]":l=[l],Rt.forEach(l,function(f){Rt.isDate(f)?f=f.toISOString():Rt.isObject(f)&&(f=JSON.stringify(f)),a.push(tr(h)+"="+tr(f))}))}),r=a.join("&")}if(r){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},uo=j;function Me(){this.handlers=[]}Me.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};Me.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Me.prototype.forEach=function(e){uo.forEach(this.handlers,function(i){i!==null&&e(i)})};var fo=Me,co=j,po=function(e,t){co.forEach(e,function(r,a){a!==t&&a.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[a])})},Nr=function(e,t,i,r,a){return e.config=t,i&&(e.code=i),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},_o=Nr,br=function(e,t,i,r,a){var s=new Error(e);return _o(s,t,i,r,a)},vo=br,go=function(e,t,i){var r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):t(vo("Request failed with status code "+i.status,i.config,null,i.request,i))},me=j,yo=me.isStandardBrowserEnv()?function(){return{write:function(t,i,r,a,s,o){var l=[];l.push(t+"="+encodeURIComponent(i)),me.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),me.isString(a)&&l.push("path="+a),me.isString(s)&&l.push("domain="+s),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){var i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),mo=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},xo=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},So=mo,Eo=xo,Io=function(e,t){return e&&!So(t)?Eo(e,t):t},ei=j,Co=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],To=function(e){var t={},i,r,a;return e&&ei.forEach(e.split(`
`),function(o){if(a=o.indexOf(":"),i=ei.trim(o.substr(0,a)).toLowerCase(),r=ei.trim(o.substr(a+1)),i){if(t[i]&&Co.indexOf(i)>=0)return;i==="set-cookie"?t[i]=(t[i]?t[i]:[]).concat([r]):t[i]=t[i]?t[i]+", "+r:r}}),t},er=j,wo=er.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),i;function r(a){var s=a;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=r(window.location.href),function(s){var o=er.isString(s)?r(s):s;return o.protocol===i.protocol&&o.host===i.host}}():function(){return function(){return!0}}();function gi(n){this.message=n}gi.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};gi.prototype.__CANCEL__=!0;var Pe=gi,xe=j,Ro=go,Oo=yo,Lo=kr,Do=Io,Fo=To,Ao=wo,ii=br,Mo=Ne,Po=Pe,ir=function(e){return new Promise(function(i,r){var a=e.data,s=e.headers,o=e.responseType,l;function h(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}xe.isFormData(a)&&delete s["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(f+":"+c)}var d=Do(e.baseURL,e.url);u.open(e.method.toUpperCase(),Lo(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function p(){if(!!u){var v="getAllResponseHeaders"in u?Fo(u.getAllResponseHeaders()):null,y=!o||o==="text"||o==="json"?u.responseText:u.response,g={data:y,status:u.status,statusText:u.statusText,headers:v,config:e,request:u};Ro(function(S){i(S),h()},function(S){r(S),h()},g),u=null}}if("onloadend"in u?u.onloadend=p:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(p)},u.onabort=function(){!u||(r(ii("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){r(ii("Network Error",e,null,u)),u=null},u.ontimeout=function(){var y=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",g=e.transitional||Mo.transitional;e.timeoutErrorMessage&&(y=e.timeoutErrorMessage),r(ii(y,e,g.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},xe.isStandardBrowserEnv()){var _=(e.withCredentials||Ao(d))&&e.xsrfCookieName?Oo.read(e.xsrfCookieName):void 0;_&&(s[e.xsrfHeaderName]=_)}"setRequestHeader"in u&&xe.forEach(s,function(y,g){typeof a=="undefined"&&g.toLowerCase()==="content-type"?delete s[g]:u.setRequestHeader(g,y)}),xe.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&o!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(l=function(v){!u||(r(!v||v&&v.type?new Po("canceled"):v),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l))),a||(a=null),u.send(a)})},W=j,rr=po,ko=Nr,No={"Content-Type":"application/x-www-form-urlencoded"};function nr(n,e){!W.isUndefined(n)&&W.isUndefined(n["Content-Type"])&&(n["Content-Type"]=e)}function bo(){var n;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(n=ir),n}function Bo(n,e,t){if(W.isString(n))try{return(e||JSON.parse)(n),W.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}var ke={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:bo(),transformRequest:[function(e,t){return rr(t,"Accept"),rr(t,"Content-Type"),W.isFormData(e)||W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)?e:W.isArrayBufferView(e)?e.buffer:W.isURLSearchParams(e)?(nr(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):W.isObject(e)||t&&t["Content-Type"]==="application/json"?(nr(t,"application/json"),Bo(e)):e}],transformResponse:[function(e){var t=this.transitional||ke.transitional,i=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,a=!i&&this.responseType==="json";if(a||r&&W.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a)throw s.name==="SyntaxError"?ko(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};W.forEach(["delete","get","head"],function(e){ke.headers[e]={}});W.forEach(["post","put","patch"],function(e){ke.headers[e]=W.merge(No)});var Ne=ke,Go=j,Yo=Ne,Wo=function(e,t,i){var r=this||Yo;return Go.forEach(i,function(s){e=s.call(r,e,t)}),e},Br=function(e){return!!(e&&e.__CANCEL__)},ar=j,ri=Wo,Xo=Br,Uo=Ne,$o=Pe;function ni(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new $o("canceled")}var Ho=function(e){ni(e),e.headers=e.headers||{},e.data=ri.call(e,e.data,e.headers,e.transformRequest),e.headers=ar.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ar.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var t=e.adapter||Uo.adapter;return t(e).then(function(r){return ni(e),r.data=ri.call(e,r.data,r.headers,e.transformResponse),r},function(r){return Xo(r)||(ni(e),r&&r.response&&(r.response.data=ri.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},z=j,Gr=function(e,t){t=t||{};var i={};function r(u,f){return z.isPlainObject(u)&&z.isPlainObject(f)?z.merge(u,f):z.isPlainObject(f)?z.merge({},f):z.isArray(f)?f.slice():f}function a(u){if(z.isUndefined(t[u])){if(!z.isUndefined(e[u]))return r(void 0,e[u])}else return r(e[u],t[u])}function s(u){if(!z.isUndefined(t[u]))return r(void 0,t[u])}function o(u){if(z.isUndefined(t[u])){if(!z.isUndefined(e[u]))return r(void 0,e[u])}else return r(void 0,t[u])}function l(u){if(u in t)return r(e[u],t[u]);if(u in e)return r(void 0,e[u])}var h={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return z.forEach(Object.keys(e).concat(Object.keys(t)),function(f){var c=h[f]||a,d=c(f);z.isUndefined(d)&&c!==l||(i[f]=d)}),i},Yr={version:"0.26.0"},Vo=Yr.version,yi={};["object","boolean","number","function","string","symbol"].forEach(function(n,e){yi[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});var sr={};yi.transitional=function(e,t,i){function r(a,s){return"[Axios v"+Vo+"] Transitional option '"+a+"'"+s+(i?". "+i:"")}return function(a,s,o){if(e===!1)throw new Error(r(s," has been removed"+(t?" in "+t:"")));return t&&!sr[s]&&(sr[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,s,o):!0}};function jo(n,e,t){if(typeof n!="object")throw new TypeError("options must be an object");for(var i=Object.keys(n),r=i.length;r-- >0;){var a=i[r],s=e[a];if(s){var o=n[a],l=o===void 0||s(o,a,n);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(t!==!0)throw Error("Unknown option "+a)}}var zo={assertOptions:jo,validators:yi},Wr=j,Jo=kr,or=fo,lr=Ho,be=Gr,Xr=zo,Ot=Xr.validators;function ae(n){this.defaults=n,this.interceptors={request:new or,response:new or}}ae.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=be(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&Xr.assertOptions(i,{silentJSONParsing:Ot.transitional(Ot.boolean),forcedJSONParsing:Ot.transitional(Ot.boolean),clarifyTimeoutError:Ot.transitional(Ot.boolean)},!1);var r=[],a=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(t)===!1||(a=a&&d.synchronous,r.unshift(d.fulfilled,d.rejected))});var s=[];this.interceptors.response.forEach(function(d){s.push(d.fulfilled,d.rejected)});var o;if(!a){var l=[lr,void 0];for(Array.prototype.unshift.apply(l,r),l=l.concat(s),o=Promise.resolve(t);l.length;)o=o.then(l.shift(),l.shift());return o}for(var h=t;r.length;){var u=r.shift(),f=r.shift();try{h=u(h)}catch(c){f(c);break}}try{o=lr(h)}catch(c){return Promise.reject(c)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};ae.prototype.getUri=function(e){return e=be(this.defaults,e),Jo(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Wr.forEach(["delete","get","head","options"],function(e){ae.prototype[e]=function(t,i){return this.request(be(i||{},{method:e,url:t,data:(i||{}).data}))}});Wr.forEach(["post","put","patch"],function(e){ae.prototype[e]=function(t,i,r){return this.request(be(r||{},{method:e,url:t,data:i}))}});var qo=ae,Ko=Pe;function Mt(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(r){e=r});var t=this;this.promise.then(function(i){if(!!t._listeners){var r,a=t._listeners.length;for(r=0;r<a;r++)t._listeners[r](i);t._listeners=null}}),this.promise.then=function(i){var r,a=new Promise(function(s){t.subscribe(s),r=s}).then(i);return a.cancel=function(){t.unsubscribe(r)},a},n(function(r){t.reason||(t.reason=new Ko(r),e(t.reason))})}Mt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Mt.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Mt.prototype.unsubscribe=function(e){if(!!this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};Mt.source=function(){var e,t=new Mt(function(r){e=r});return{token:t,cancel:e}};var Zo=Mt,Qo=function(e){return function(i){return e.apply(null,i)}},tl=j,el=function(e){return tl.isObject(e)&&e.isAxiosError===!0},hr=j,il=Fr,Ee=qo,rl=Gr,nl=Ne;function Ur(n){var e=new Ee(n),t=il(Ee.prototype.request,e);return hr.extend(t,Ee.prototype,e),hr.extend(t,e),t.create=function(r){return Ur(rl(n,r))},t}var rt=Ur(nl);rt.Axios=Ee;rt.Cancel=Pe;rt.CancelToken=Zo;rt.isCancel=Br;rt.VERSION=Yr.version;rt.all=function(e){return Promise.all(e)};rt.spread=Qo;rt.isAxiosError=el;pi.exports=rt;pi.exports.default=rt;var al=pi.exports;const mi=al.create({timeout:5e3});mi.interceptors.request.use(n=>n,n=>Promise.reject(n));mi.interceptors.response.use(n=>n,n=>(aa.error(n.message),Promise.reject(n)));const sl=()=>mi({url:"/typhoonData.json"}),ol=(n,e)=>{const t=[n[e].lng,n[e].lat],i=new Ae({geometry:new vr(At(t))});return i.setStyle(new Tr({image:new Er({fill:new Ir({color:fl(n[e].strong)}),radius:5})})),i.set("typhoonPoint",!0),i.set("points",n[e]),i},ll=(n,e)=>{const t=[n[e].lng,n[e].lat],i=[n[e-1].lng,n[e-1].lat],r=new Ae({geometry:new Ia([At(t),At(i)])});return r.set("typhoonLine",!0),r},hl=n=>{let e=n.radius7.split("|").map(s=>parseFloat(s)),t={CIRCLE_CENTER_X:parseFloat(n.lng),CIRCLE_CENTER_Y:parseFloat(n.lat),CIRCLE_R:{SE:e[0]/100,NE:e[1]/100,NW:e[2]/100,SW:e[3]/100}},i=[],r=6;for(let s=0;s<360/r;s++){let o=0,l=s*r;l>0&&l<=90?o=t.CIRCLE_R.NE:l>90&&l<=180?o=t.CIRCLE_R.NW:l>180&&l<=270?o=t.CIRCLE_R.SW:o=t.CIRCLE_R.SE;let h=t.CIRCLE_CENTER_X+o*Math.cos(l*3.14/180),u=t.CIRCLE_CENTER_Y+o*Math.sin(l*3.14/180);i.push(At([h,u]))}let a=new Ae({geometry:new Zn([i])});return a.set("typhoonSolar",!0),a},ul=(n,e)=>{const t=[n[e].lng,n[e].lat],i=new Ae({geometry:new vr(At(t))});return i.setStyle(new Tr({image:new Rr({src:"/typhoon.png",scale:.5})})),i},fl=n=>({\u70ED\u5E26\u98CE\u66B4:"red",\u70ED\u5E26\u4F4E\u538B:"blue",\u5F3A\u70ED\u5E26\u98CE\u66B4:"purple",\u53F0\u98CE:"orange",\u5F3A\u53F0\u98CE:"yellow",\u8D85\u5F3A\u53F0\u98CE:"salmon"})[n],cl=(n,e)=>{let t=xt(null);const i=new Qn({element:e,autoPan:!0,autoPanAnimation:{duration:250}});return i.setPosition(void 0),t.value=i,console.log(e),n.addOverlay(i),t.value};let Ie=xt(null);const dl=(n,e,t)=>{const i=cl(n,e);n.on("pointermove",r=>{const a=r.pixel,s=n.forEachFeatureAtPixel(a,o=>o);s&&gl(s)==="typhoonPoint"?(t.value=s.get("points"),ur(),n.getTargetElement().style.cursor="pointer",pl(t.value,i),s.getStyle().getImage().setRadius(8),s.changed(),Ie.value=s):(ur(),n.getTargetElement().style.cursor="",t.value={},_l(i))})},pl=(n,e)=>{const t=At([n.lng,n.lat]);e.setPosition(t)},_l=n=>{n.setPosition(void 0)},vl=n=>{n.on("click",e=>{const t=e.pixel,i=n.forEachFeatureAtPixel(t,r=>r);i?i.get("typhoonPoint")&&console.log("you click tyhoonPoint!"):console.log("no click feature")})},ur=()=>{Ie.value!=null&&(Ie.value.getStyle().getImage().setRadius(5),Ie.value.changed())},gl=n=>n.get("typhoonPoint")?"typhoonPoint":n.get("typhoonSolar")?"typhoonSolar":"isFeatureButDontNeedTodo";const yl=n=>(ua("data-v-0b5d8810"),n=n(),fa(),n),ml=yl(()=>Wi("div",{class:"card-header"},[Wi("span",null,"\u5B9E\u51B5\u53F0\u98CE\u4FE1\u606F")],-1)),xl={props:{typhoonData:{type:Object},typhoonName:{type:String}},setup(n){return(e,t)=>{const i=sa,r=oa,a=la,s=ha;return di(),gr(s,{class:"box-card"},{header:J(()=>[ml]),default:J(()=>[U(a,{column:2,border:""},{default:J(()=>[U(i,{label:"\u540D\u79F0","label-align":"right",align:"center","label-class-name":"my-label","class-name":"my-content"},{default:J(()=>[Ct(mt(n.typhoonName),1)]),_:1}),U(i,{label:"\u65F6\u95F4","label-align":"right",align:"center"},{default:J(()=>[U(r,{size:"small"},{default:J(()=>[Ct(mt(n.typhoonData.time),1)]),_:1})]),_:1}),U(i,{label:"\u5F3A\u5EA6","label-align":"right",align:"center"},{default:J(()=>[Ct(mt(n.typhoonData.strong),1)]),_:1}),U(i,{label:"\u6C14\u538B","label-align":"right",align:"center"},{default:J(()=>[Ct(mt(n.typhoonData.pressure)+" \u767E\u5E15",1)]),_:1}),U(i,{label:"\u79FB\u901F","label-align":"right",align:"center"},{default:J(()=>[Ct(mt(n.typhoonData.speed)+" \u7C73/\u6BCF\u79D2",1)]),_:1}),U(i,{label:"\u4E2D\u5FC3\u4F4D\u7F6E","label-align":"right",align:"center"},{default:J(()=>[Ct(" \u4E1C\u7ECF: "+mt(n.typhoonData.lng)+",\u5317\u7EAC: "+mt(n.typhoonData.lat),1)]),_:1})]),_:1})]),_:1})}}};var Sl=na(xl,[["__scopeId","data-v-0b5d8810"]]);const El={setup(n){const e=ca("map"),t=xt(""),i=async()=>{const{data:h}=await sl();return t.value=h.name,h};let r=xt(null),a=xt(null);(async()=>{const{points:h}=await i(),u=new Xs,f=new zs;u.setSource(f);let c=0;const d=setInterval(()=>{if(c==h.length){clearInterval(d);return}const p=ol(h,c);if(f.addFeature(p),c>0){const _=ll(h,c);f.addFeature(_)}if(h[c].radius7.length!=0||h[c].radius7!=null){let _=hl(h[c]);r!=null&&f.removeFeature(r),r=_,f.addFeature(_)}if(c<=h.length-1){let _=ul(h,c),v=a;v!=null&&f.removeFeature(v),a=_,f.addFeature(_)}c++},50);e.addLayer(u)})();let o=xt({}),l=xt(null);return da(()=>{dl(e,l.value,o)}),vl(e),(h,u)=>(di(),pa("div",{ref_key:"typhoonInfo",ref:l},[U(Sl,{typhoonData:_a(o),typhoonName:t.value},null,8,["typhoonData","typhoonName"])],512))}},Il={setup(n){const e=[113.27,23.1],t="http://t{0-7}.tianditu.gov.cn/vec_w/wmts?tk=40e50cca6823476482e8721bb2eee900",i="http://t{0-7}.tianditu.gov.cn/cva_w/wmts?tk=40e50cca6823476482e8721bb2eee900",r="vec",a="cva",s="\u52A0\u8F7DWMTS\u5929\u5730\u56FE";return(o,l)=>{const h=ea,u=ia,f=ra,c=ta;return di(),gr(c,null,{default:J(()=>[U(h,{center:e,zoom:5}),U(f,null,{default:J(()=>[U(u,{url:t,attributions:s,layer:r})]),_:1}),U(f,null,{default:J(()=>[U(u,{url:i,attributions:s,layer:a})]),_:1}),U(El)]),_:1})}}};var Rl=Il;export{Rl as default};
