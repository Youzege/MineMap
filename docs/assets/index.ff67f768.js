import{C as X,a as at,P as O,E as G,s as ht,e as lt,l as H,u as dt,c as z,b as ut,d as ft,G as p,i as ct,f as _t,g as pt,r as gt,t as vt,S as M,h as P,j as b,k as yt,m as Ct,n as R,o as mt,p as wt,L as I,q as Lt,v as Pt,w as Tt,x as Ot,y as Et,z as kt,A as F,B as Rt,D as It,F as Ft,H as Nt,I as St,J as Dt,K as Mt,M as xt,N as B,O as At,Q as Gt,R as Yt,T as bt,U as Y,V as Vt,W as Ut,X as jt,Y as Xt,Z as Ht,_ as $,$ as zt,a0 as J,a1 as Q,a2 as Bt,a3 as $t,a4 as Wt,a5 as Kt,a6 as w,a7 as Zt,a8 as E,a9 as qt,aa as Jt,ab as W,ac as N,ad as A,ae as K,af as Z,ag as Qt,ah as q,ai as te,aj as ee,ak as ie,al as re}from"./ZeView.bec035b5.js";import{x as se,y as ne,z as oe,A as ae,B as he,C as le,o as tt,c as de,w as m,d as v,j as ue,D as fe,G as V,a as ce}from"./vendor.6c24ca1c.js";import{_ as _e}from"./index.51aa8a91.js";var pe=globalThis&&globalThis.__extends||function(){var h=function(s,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},h(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");h(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),k={VERTICAL:0,HORIZONTAL:1},ge=function(h){pe(s,h);function s(t){var e=this,i=t||{};e=h.call(this,{element:document.createElement("div"),render:i.render})||this,e.dragListenerKeys_=[],e.currentResolution_=void 0,e.direction_=k.VERTICAL,e.dragging_,e.heightLimit_=0,e.widthLimit_=0,e.startX_,e.startY_,e.thumbSize_=null,e.sliderInitialized_=!1,e.duration_=i.duration!==void 0?i.duration:200;var r=i.className!==void 0?i.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=r+"-thumb "+X;var o=e.element;return o.className=r+" "+X+" "+at,o.appendChild(n),o.addEventListener(O.POINTERDOWN,e.handleDraggerStart_.bind(e),!1),o.addEventListener(O.POINTERMOVE,e.handleDraggerDrag_.bind(e),!1),o.addEventListener(O.POINTERUP,e.handleDraggerEnd_.bind(e),!1),o.addEventListener(G.CLICK,e.handleContainerClick_.bind(e),!1),n.addEventListener(G.CLICK,ht,!1),e}return s.prototype.setMap=function(t){h.prototype.setMap.call(this,t),t&&t.render()},s.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight;if(e===0&&i===0)return this.sliderInitialized_=!1;var r=getComputedStyle(t);e-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var n=t.firstElementChild,o=getComputedStyle(n),a=n.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),l=n.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[a,l],e>i?(this.direction_=k.HORIZONTAL,this.widthLimit_=e-a):(this.direction_=k.VERTICAL,this.heightLimit_=i-l),this.sliderInitialized_=!0},s.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i),n=e.getConstrainedZoom(e.getZoomForResolution(r));e.animateInternal({zoom:n,duration:this.duration_,easing:lt})},s.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){var i=this.handleDraggerDrag_,r=this.handleDraggerEnd_,n=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(H(n,O.POINTERMOVE,i,this),H(n,O.POINTERUP,r,this))}}},s.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,i=t.clientY-this.startY_,r=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_)}},s.prototype.handleDraggerEnd_=function(t){if(this.dragging_){var e=this.getMap().getView();e.endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(dt),this.dragListenerKeys_.length=0}},s.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==k.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},s.prototype.getRelativePosition_=function(t,e){var i;return this.direction_===k.HORIZONTAL?i=t/this.widthLimit_:i=e/this.heightLimit_,z(i,0,1)},s.prototype.getResolutionForPosition_=function(t){var e=this.getMap().getView().getResolutionForValueFunction();return e(1-t)},s.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return z(1-e(t),0,1)},s.prototype.render=function(t){if(!!t.frameState&&!(!this.sliderInitialized_&&!this.initSlider_())){var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}},s}(ut),ve=ge,ye=globalThis&&globalThis.__extends||function(){var h=function(s,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},h(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");h(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),et=function(h){ye(s,h);function s(t,e,i){var r=h.call(this)||this;if(i!==void 0&&e===void 0)r.setFlatCoordinates(i,t);else{var n=e||0;r.setCenterAndRadius(t,n,i)}return r}return s.prototype.clone=function(){var t=new s(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},s.prototype.closestPointXY=function(t,e,i,r){var n=this.flatCoordinates,o=t-n[0],a=e-n[1],l=o*o+a*a;if(l<r){if(l===0)for(var d=0;d<this.stride;++d)i[d]=n[d];else{var f=this.getRadius()/Math.sqrt(l);i[0]=n[0]+f*o,i[1]=n[1]+f*a;for(var d=2;d<this.stride;++d)i[d]=n[d]}return i.length=this.stride,l}else return r},s.prototype.containsXY=function(t,e){var i=this.flatCoordinates,r=t-i[0],n=e-i[1];return r*r+n*n<=this.getRadiusSquared_()},s.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},s.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return ft(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},s.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},s.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},s.prototype.getType=function(){return p.CIRCLE},s.prototype.intersectsExtent=function(t){var e=this.getExtent();if(ct(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]?!0:_t(t,this.intersectsCoordinate.bind(this))}return!1},s.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+i;for(var n=1;n<e;++n)r[e+n]=t[n];this.setFlatCoordinates(this.layout,r),this.changed()},s.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,n=pt(r,0,t,this.stride);r[n++]=r[0]+e;for(var o=1,a=this.stride;o<a;++o)r[n++]=r[o];r.length=n,this.changed()},s.prototype.getCoordinates=function(){return null},s.prototype.setCoordinates=function(t,e){},s.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},s.prototype.rotate=function(t,e){var i=this.getCenter(),r=this.getStride();this.setCenter(gt(i,0,i.length,r,t,e,i)),this.changed()},s.prototype.translate=function(t,e){var i=this.getCenter(),r=this.getStride();this.setCenter(vt(i,0,i.length,r,t,e,i)),this.changed()},s}(M);et.prototype.transform;var Ce=et,me=globalThis&&globalThis.__extends||function(){var h=function(s,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},h(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");h(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),we=function(h){me(s,h);function s(t,e,i){var r=h.call(this)||this;if(r.ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(t[0]))r.setCoordinates(t,e);else if(e!==void 0&&i)r.setFlatCoordinates(e,t),r.ends_=i;else{for(var n=r.getLayout(),o=t,a=[],l=[],d=0,f=o.length;d<f;++d){var c=o[d];d===0&&(n=c.getLayout()),P(a,c.getFlatCoordinates()),l.push(a.length)}r.setFlatCoordinates(n,a),r.ends_=l}return r}return s.prototype.appendLineString=function(t){this.flatCoordinates?P(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},s.prototype.clone=function(){var t=new s(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},s.prototype.closestPointXY=function(t,e,i,r){return r<b(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(yt(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ct(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))},s.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=R.XYM&&this.layout!=R.XYZM||this.flatCoordinates.length===0)return null;var r=e!==void 0?e:!1,n=i!==void 0?i:!1;return mt(this.flatCoordinates,0,this.ends_,this.stride,t,r,n)},s.prototype.getCoordinates=function(){return wt(this.flatCoordinates,0,this.ends_,this.stride)},s.prototype.getEnds=function(){return this.ends_},s.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new I(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},s.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[],n=0,o=0,a=e.length;o<a;++o){var l=e[o],d=new I(t.slice(n,l),i);r.push(d),n=l}return r},s.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,r=this.ends_,n=this.stride,o=0,a=r.length;o<a;++o){var l=r[o],d=Lt(e,i,l,n,.5);P(t,d),i=l}return t},s.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];return e.length=Pt(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new s(e,R.XY,i)},s.prototype.getType=function(){return p.MULTI_LINE_STRING},s.prototype.intersectsExtent=function(t){return Tt(this.flatCoordinates,0,this.ends_,this.stride,t)},s.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Ot(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},s}(M),Le=we,Pe=globalThis&&globalThis.__extends||function(){var h=function(s,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},h(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");h(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Te=function(h){Pe(s,h);function s(t,e){var i=h.call(this)||this;return e&&!Array.isArray(t[0])?i.setFlatCoordinates(e,t):i.setCoordinates(t,e),i}return s.prototype.appendPoint=function(t){this.flatCoordinates?P(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},s.prototype.clone=function(){var t=new s(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},s.prototype.closestPointXY=function(t,e,i,r){if(r<b(this.getExtent(),t,e))return r;for(var n=this.flatCoordinates,o=this.stride,a=0,l=n.length;a<l;a+=o){var d=Et(t,e,n[a],n[a+1]);if(d<r){r=d;for(var f=0;f<o;++f)i[f]=n[a+f];i.length=o}}return r},s.prototype.getCoordinates=function(){return kt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},s.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new F(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},s.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,r=[],n=0,o=t.length;n<o;n+=i){var a=new F(t.slice(n,n+i),e);r.push(a)}return r},s.prototype.getType=function(){return p.MULTI_POINT},s.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,r=0,n=e.length;r<n;r+=i){var o=e[r],a=e[r+1];if(Rt(t,o,a))return!0}return!1},s.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=It(this.flatCoordinates,0,t,this.stride),this.changed()},s}(M),it=Te;function Oe(h,s,t,e){for(var i=[],r=Nt(),n=0,o=t.length;n<o;++n){var a=t[n];r=Ft(h,s,a[0],e),i.push((r[0]+r[2])/2,(r[1]+r[3])/2),s=a[a.length-1]}return i}var Ee=globalThis&&globalThis.__extends||function(){var h=function(s,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},h(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");h(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ke=function(h){Ee(s,h);function s(t,e,i){var r=h.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){for(var n=r.getLayout(),o=t,a=[],l=[],d=0,f=o.length;d<f;++d){var c=o[d];d===0&&(n=c.getLayout());for(var g=a.length,_=c.getEnds(),y=0,x=_.length;y<x;++y)_[y]+=g;P(a,c.getFlatCoordinates()),l.push(_)}e=n,t=a,i=l}return e!==void 0&&i?(r.setFlatCoordinates(e,t),r.endss_=i):r.setCoordinates(t,e),r}return s.prototype.appendPolygon=function(t){var e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{var i=this.flatCoordinates.length;P(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(var r=0,n=e.length;r<n;++r)e[r]+=i}this.endss_.push(e),this.changed()},s.prototype.clone=function(){for(var t=this.endss_.length,e=new Array(t),i=0;i<t;++i)e[i]=this.endss_[i].slice();var r=new s(this.flatCoordinates.slice(),this.layout,e);return r.applyProperties(this),r},s.prototype.closestPointXY=function(t,e,i,r){return r<b(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(St(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Dt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))},s.prototype.containsXY=function(t,e){return Mt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},s.prototype.getArea=function(){return xt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},s.prototype.getCoordinates=function(t){var e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),B(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,At(e,0,this.endss_,this.stride)},s.prototype.getEndss=function(){return this.endss_},s.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Oe(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Gt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},s.prototype.getInteriorPoints=function(){return new it(this.getFlatInteriorPoints().slice(),R.XYM)},s.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Yt(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=B(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},s.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];return e.length=bt(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new s(e,R.XY,i)},s.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(t===0)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),n=r[r.length-1];if(e!==0)for(var o=0,a=r.length;o<a;++o)r[o]-=e;return new Y(this.flatCoordinates.slice(e,n),this.layout,r)},s.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],n=0,o=0,a=i.length;o<a;++o){var l=i[o].slice(),d=l[l.length-1];if(n!==0)for(var f=0,c=l.length;f<c;++f)l[f]-=n;var g=new Y(e.slice(n,d),t,l);r.push(g),n=d}return r},s.prototype.getType=function(){return p.MULTI_POLYGON},s.prototype.intersectsExtent=function(t){return Vt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},s.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Ut(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()},s}(M),Re=ke,rt=globalThis&&globalThis.__extends||function(){var h=function(s,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},h(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");h(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),u={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},S={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},D=function(h){rt(s,h);function s(t,e){var i=h.call(this,t)||this;return i.feature=e,i}return s}(jt),Ie=function(h){rt(s,h);function s(t){var e=this,i=t;i.stopDown||(i.stopDown=Xt),e=h.call(this,i)||this,e.on,e.once,e.un,e.shouldHandle_=!1,e.downPx_=null,e.downTimeout_,e.lastDragTime_,e.pointerType_,e.freehand_=!1,e.source_=t.source?t.source:null,e.features_=t.features?t.features:null,e.snapTolerance_=t.snapTolerance?t.snapTolerance:12,e.type_=t.type,e.mode_=Ne(e.type_),e.stopClick_=!!t.stopClick,e.minPoints_=t.minPoints?t.minPoints:e.mode_===u.POLYGON?3:2,e.maxPoints_=e.mode_===u.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,e.finishCondition_=t.finishCondition?t.finishCondition:Ht;var r=t.geometryFunction;if(!r){var n=e.mode_;if(n===u.CIRCLE)r=function(a,l,d){var f=l||new Ce([NaN,NaN]),c=$(a[0]),g=zt(c,$(a[a.length-1]));return f.setCenterAndRadius(c,Math.sqrt(g)),f};else{var o;n===u.POINT?o=F:n===u.LINE_STRING?o=I:n===u.POLYGON&&(o=Y),r=function(a,l,d){return l?n===u.POLYGON?a[0].length?l.setCoordinates([a[0].concat([a[0][0]])]):l.setCoordinates([]):l.setCoordinates(a):l=new o(a),l}}}return e.geometryFunction_=r,e.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,e.finishCoordinate_=null,e.sketchFeature_=null,e.sketchPoint_=null,e.sketchCoords_=null,e.sketchLine_=null,e.sketchLineCoords_=null,e.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,e.overlay_=new J({source:new Q({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:Fe(),updateWhileInteracting:!0}),e.geometryName_=t.geometryName,e.condition_=t.condition?t.condition:Bt,e.freehandCondition_,t.freehand?e.freehandCondition_=$t:e.freehandCondition_=t.freehandCondition?t.freehandCondition:Wt,e.addChangeListener(Kt.ACTIVE,e.updateState_),e}return s.prototype.setMap=function(t){h.prototype.setMap.call(this,t),this.updateState_()},s.prototype.getOverlay=function(){return this.overlay_},s.prototype.handleEvent=function(t){t.originalEvent.type===G.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==u.POINT&&this.freehandCondition_(t);var e=t.type===w.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===w.POINTERDRAG){var r=Date.now();r-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===w.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===w.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===w.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===w.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===w.DBLCLICK&&(i=!1),h.prototype.handleEvent.call(this,t)&&i},s.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Zt(w.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},s.prototype.handleUpEvent=function(t){var e=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_===u.POINT)&&(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing();return!e&&this.stopClick_&&t.preventDefault(),e},s.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,r=e[0]-i[0],n=e[1]-i[1],o=r*r+n*n;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},s.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_],n=this.mode_;if(n===u.POINT)e=!0;else if(n===u.CIRCLE)e=this.sketchCoords_.length===2;else if(n===u.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(n===u.POLYGON){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var a=this.getMap(),l=0,d=r.length;l<d;l++){var f=r[l],c=a.getPixelFromCoordinate(f),g=t[0]-c[0],_=t[1]-c[1],y=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(g*g+_*_)<=y,e){this.finishCoordinate_=f;break}}}return e},s.prototype.createOrUpdateSketchPoint_=function(t){if(!this.sketchPoint_)this.sketchPoint_=new E(new F(t)),this.updateSketchFeatures_();else{var e=this.sketchPoint_.getGeometry();e.setCoordinates(t)}},s.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new E);var e=t.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new I(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))},s.prototype.startDrawing_=function(t){var e=this.getMap().getView().getProjection();this.finishCoordinate_=t,this.mode_===u.POINT?this.sketchCoords_=t.slice():this.mode_===u.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new E(new I(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new E,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new D(S.DRAWSTART,this.sketchFeature_))},s.prototype.modifyDrawing_=function(t){var e=this.getMap(),i=this.sketchFeature_.getGeometry(),r=e.getView().getProjection(),n,o;if(this.mode_===u.POINT?o=this.sketchCoords_:this.mode_===u.POLYGON?(n=this.sketchCoords_[0],o=n[n.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(n=this.sketchCoords_,o=n[n.length-1]),o[0]=t[0],o[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,r),this.sketchPoint_){var a=this.sketchPoint_.getGeometry();a.setCoordinates(t)}if(i.getType()===p.POLYGON&&this.mode_!==u.POLYGON)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){var l=this.sketchLine_.getGeometry();l.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},s.prototype.addToDrawing_=function(t){var e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r,n,o=this.mode_;o===u.LINE_STRING||o===u.CIRCLE?(this.finishCoordinate_=t.slice(),n=this.sketchCoords_,n.length>=this.maxPoints_&&(this.freehand_?n.pop():r=!0),n.push(t.slice()),this.geometryFunction_(n,e,i)):o===u.POLYGON&&(n=this.sketchCoords_[0],n.length>=this.maxPoints_&&(this.freehand_?n.pop():r=!0),n.push(t.slice()),r&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),r&&this.finishDrawing()},s.prototype.removeLastPoint=function(){if(!!this.sketchFeature_){var t=this.sketchFeature_.getGeometry(),e=this.getMap().getView().getProjection(),i,r=this.mode_;if(r===u.LINE_STRING||r===u.CIRCLE){if(i=this.sketchCoords_,i.splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();var n=this.finishCoordinate_.slice();i[i.length-1]=n,this.createOrUpdateSketchPoint_(n)}this.geometryFunction_(i,t,e),t.getType()===p.POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(r===u.POLYGON){i=this.sketchCoords_[0],i.splice(-2,1);var o=this.sketchLine_.getGeometry();if(i.length>=2){var n=i[i.length-2].slice();i[i.length-1]=n,this.createOrUpdateSketchPoint_(n)}o.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,t,e)}i.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},s.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(!!t){var e=this.sketchCoords_,i=t.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===u.LINE_STRING?(e.pop(),this.geometryFunction_(e,i,r)):this.mode_===u.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i,r),e=i.getCoordinates()),this.type_===p.MULTI_POINT?t.setGeometry(new it([e])):this.type_===p.MULTI_LINE_STRING?t.setGeometry(new Le([e])):this.type_===p.MULTI_POLYGON&&t.setGeometry(new Re([e])),this.dispatchEvent(new D(S.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},s.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},s.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new D(S.DRAWABORT,t))},s.prototype.appendCoordinates=function(t){var e=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(t[0]);var r;if(e===u.LINE_STRING||e===u.CIRCLE)r=this.sketchCoords_;else if(e===u.POLYGON)r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&r.shift(),r.pop();for(var n=0;n<t.length;n++)this.addToDrawing_(t[n]);var o=t[t.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)},s.prototype.extend=function(t){var e=t.getGeometry(),i=e;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new E(new F(r)),this.updateSketchFeatures_(),this.dispatchEvent(new D(S.DRAWSTART,this.sketchFeature_))},s.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},s.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();(!t||!e)&&this.abortDrawing(),this.overlay_.setMap(e?t:null)},s}(qt);function Fe(){var h=Jt();return function(s,t){return h[s.getGeometry().getType()]}}function Ne(h){switch(h){case p.POINT:case p.MULTI_POINT:return u.POINT;case p.LINE_STRING:case p.MULTI_LINE_STRING:return u.LINE_STRING;case p.POLYGON:case p.MULTI_POLYGON:return u.POLYGON;case p.CIRCLE:return u.CIRCLE;default:throw new Error("Invalid type: "+h)}}var Se=Ie;const De=V(" \u5DE5\u5177\u7BB1 "),Me=V("\u6D4B\u91CF\u8DDD\u79BB"),xe=V("\u6E05\u9664\u6D4B\u91CF"),Ae={setup(h){const s=se("map");let t=ne([]);const e=new ve;s.addControl(e);const i=()=>{const o=new Q,a=new J({source:o,style:new W({fill:new N({color:"rgba(255, 255, 255, 0.2)"}),stroke:new A({color:"#ffcc33",width:2}),image:new K({radius:7,fill:new N({color:"#ffcc33"})})})});let l,d,f,c,g,_,y;const x=()=>{c&&c.parentNode.removeChild(c),c=document.createElement("div"),c.className="ol-tooltip hidden",g=new q({element:c,offset:[15,0],positioning:"center-left"}),s.addOverlay(g)},U=()=>{_&&_.parentNode.removeChild(_),_=document.createElement("div"),_.className="ol-tooltip ol-tooltip-measure",y=new q({element:_,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),t.value.push(_),s.addOverlay(y)};let st=s.on("pointermove",function(L){let C="\u70B9\u51FB\u5730\u56FE\u4F5C\u4E3A\u76EE\u6807\u70B9";l&&(C="\u53CC\u51FB\u5730\u56FE\u4F5C\u4E3A\u7ED3\u675F\u70B9"),c.innerHTML=C,g.setPosition(L.coordinate),c.classList.remove("hidden")});d=new Se({source:o,type:"LineString",style:new W({fill:new N({color:"rgba(255, 255, 255, 0.2)"}),stroke:new A({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new K({radius:5,stroke:new A({color:"rgba(0, 0, 0, 0.7)"}),fill:new N({color:"rgba(255, 255, 255, 0.2)"})})})}),d.on("drawstart",function(L){l=L.feature;let C=L.coordinate;f=l.getGeometry().on("change",function(T){const j=T.target;let ot=nt(j);C=j.getLastCoordinate(),_.innerHTML=ot,y.setPosition(C)})}),s.getViewport().addEventListener("mouseout",function(){c.classList.add("hidden")}),d.on("drawend",function(){_.className="ol-tooltip ol-tooltip-static",y.setOffset([0,-7]),l=null,_=null,U(),s.removeInteraction(d),Z(f),Z(st)}),s.addInteraction(d);const nt=function(L){const C=Qt(L);let T;return C>100?T=Math.round(C/1e3*100)/100+" \u516C\u91CC":T=Math.round(C*100)/100+" \u7C73",T};x(),U(),r.push(a),s.addLayer(a)},r=[],n=()=>{let o=r;for(let a=0;a<o.length;a++)s.removeLayer(o[a]);for(let a=0;a<t.value.length;a++)t.value[a].parentNode.removeChild(t.value[a]),console.log(t.value);t.value=[]};return(o,a)=>{const l=oe,d=ae,f=he,c=le;return tt(),de(c,null,{dropdown:m(()=>[v(f,null,{default:m(()=>[v(d,{onClick:i},{default:m(()=>[Me]),_:1}),v(d,{onClick:n},{default:m(()=>[xe]),_:1})]),_:1})]),default:m(()=>[v(l,{color:"#626aef",icon:ue(fe),plain:""},{default:m(()=>[De]),_:1},8,["icon"])]),_:1})}}};const Ge={class:"map-container"},Ye={setup(h){const s=[113.27,23.1],t="http://t{0-7}.tianditu.gov.cn/vec_w/wmts?tk=40e50cca6823476482e8721bb2eee900",e="http://t{0-7}.tianditu.gov.cn/cva_w/wmts?tk=40e50cca6823476482e8721bb2eee900",i="vec",r="cva",n="\u5929\u5730\u56FEXYZ";return(o,a)=>{const l=ee,d=ie,f=re,c=te;return tt(),ce("div",Ge,[v(c,null,{default:m(()=>[v(l,{center:s,zoom:12}),v(f,null,{default:m(()=>[v(d,{url:t,attributions:n,layer:i})]),_:1}),v(f,null,{default:m(()=>[v(d,{url:e,attributions:n,layer:r})]),_:1}),v(Ae,{class:"tool-box"})]),_:1})])}}};var je=_e(Ye,[["__scopeId","data-v-6e8ce34b"]]);export{je as default};
